(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1101:function(e,t,a){},1110:function(e,t,a){"use strict";a.r(t);a(273),a(445);var n=a(0),r=a.n(n),i=a(20),o=a.n(i),s=(a(447),a(190)),l=a(33),c=a(34),d=a(36),u=a(35),h=a(37),m=a(5),p=(a(759),a(272)),g=a.n(p),b=a(21),f=a.n(b),j=a(41),v=a(29),y=a.n(v),k=a(664),O=a.n(k),w=a(58),E=a.n(w),S=a(129),C=a.n(S),R=a(59),D=a.n(R),N=a(56),_=a.n(N),x=a(8),P=a.n(x),Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={username:"",password:""},a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){console.log("handleSubmit"),e.preventDefault(),this.props.login_handler(this.state)}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement(O.a,null),r.a.createElement("main",{className:e.layout},r.a.createElement(_.a,{className:e.paper},r.a.createElement(f.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:e.form,onSubmit:this.handleSubmit},r.a.createElement(E.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(D.a,{htmlFor:"username"},"Email Address or Username"),r.a.createElement(C.a,{id:"username",name:"username",autoComplete:"email",value:this.state.username,onChange:this.handleChange,autoFocus:!0})),r.a.createElement(E.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(D.a,{htmlFor:"password"},"Password"),r.a.createElement(C.a,{name:"password",type:"password",id:"password",autoComplete:"current-password",value:this.state.password,onChange:this.handleChange})),r.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign in")))))}}]),t}(r.a.Component),I=P()(function(e){return{layout:Object(j.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(Q),A=a(666),T=a.n(A),L=a(108),M=a.n(L),z=a(146),K=a.n(z),V=a(78),B=a.n(V),q=a(51),F=a.n(q),U=a(88),W=a.n(U),G=a(60),H=a.n(G),Y=a(57),J=a.n(Y),X=a(269),$=a.n(X),Z=a(270),ee=a.n(Z),te=a(271),ae=a.n(te),ne=a(268),re=a.n(ne),ie=a(191),oe=a.n(ie),se=a(192),le=a.n(se),ce=a(188),de=a.n(ce),ue=a(187),he=a.n(ue),me=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={addAmount:0,reward_id:"",vip_id:""},a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.handleNumPadChange=a.handleNumPadChange.bind(Object(m.a)(Object(m.a)(a))),a.add=a.add.bind(Object(m.a)(Object(m.a)(a))),a.subtract=a.subtract.bind(Object(m.a)(Object(m.a)(a))),a.handleManualScan=a.handleManualScan.bind(Object(m.a)(Object(m.a)(a))),a.handleManualClaim=a.handleManualClaim.bind(Object(m.a)(Object(m.a)(a))),a.handleVIP=a.handleVIP.bind(Object(m.a)(Object(m.a)(a))),a.handleVIPadd=a.handleVIPadd.bind(Object(m.a)(Object(m.a)(a))),a.handleVIPdelete=a.handleVIPdelete.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.data&&this.props.data.vip&&this.props.data.vip[0]&&this.setState({vip_id:this.props.data.vip[0].id||null})}},{key:"componentDidUpdate",value:function(){}},{key:"handleChange",value:function(e,t){this.setState(Object(j.a)({},t,e.target.value))}},{key:"handleNumPadChange",value:function(e,t){this.setState(Object(j.a)({},t,parseInt(e)))}},{key:"add",value:function(){this.setState({addAmount:this.state.addAmount+1},function(){console.log(this.state)})}},{key:"subtract",value:function(){this.setState({addAmount:this.state.addAmount-1},function(){console.log(this.state)})}},{key:"handleManualScan",value:function(){var e=this.props,t=e.data,a=e.token,n=this.state.addAmount,r={user_id:t.userDetails[0].id,amount:n,token:a};this.props.handleManualScan(r),this.setState({addAmount:0})}},{key:"handleManualClaim",value:function(){var e=this.props,t=e.data,a=e.token,n=this.state.reward_id,r={user_id:t.userDetails[0].id,reward_id:n,token:a};this.props.handleManualClaim(r),this.setState({reward_id:""})}},{key:"handleVIP",value:function(){"delete"===this.state.vip_id?this.handleVIPdelete():this.handleVIPadd()}},{key:"handleVIPadd",value:function(){var e=this.props.data,t=this.state.vip_id,a={user_id:e.userDetails[0].id,vip_id:t};this.props.handleVIPadd(a)}},{key:"handleVIPdelete",value:function(){var e=this.props.data;this.props.handleVIPdelete(e.userDetails[0].id)}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.data,i=t.clientData,o=this.state,s=o.addAmount,l=o.reward_id,c=o.vip_id,d=new Date(1e3*n.userDetails[0].created),u=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(d);return r.a.createElement("div",null,r.a.createElement(M.a,{position:"static",color:"default"},r.a.createElement(K.a,null,r.a.createElement(f.a,{variant:"h5",className:a.flexBox+" "+a.flexItem},n.vip[0]&&r.a.createElement("div",{className:a.vip},n.vip[0].name),n.userDetails[0].name),r.a.createElement("div",{className:a.flexBox},r.a.createElement("div",{className:a.flexItem+" "+a.marginSides},r.a.createElement(f.a,{color:"textSecondary",variant:"caption"},"Joined"),r.a.createElement(f.a,{gutterBottom:!0,component:"p"},u)),r.a.createElement("div",{className:a.flexItem+" "+a.marginSides},r.a.createElement(f.a,{color:"textSecondary",variant:"caption"},"Total points earned"),r.a.createElement(f.a,{gutterBottom:!0,component:"p"},n.userDetails[0].points)),r.a.createElement("div",{className:a.flexItem+" "+a.marginSides},r.a.createElement(f.a,{color:"textSecondary",variant:"caption"},"Total rewards redeemed"),r.a.createElement(f.a,{component:"p"},n.userDetails[0].redeemed_count))))),r.a.createElement("div",{className:a.cardWrapper},r.a.createElement(oe.a,{className:a.card},r.a.createElement("div",{className:a.details},r.a.createElement(le.a,{className:a.content},r.a.createElement(f.a,{variant:"subtitle1"},"Current Points"),r.a.createElement(f.a,{component:"h5",variant:"h5"},n.userDetails[0].current_points),r.a.createElement("div",{className:a.controls},r.a.createElement(he.a.Popover,{onChange:function(t){return e.handleNumPadChange(t,"addAmount")},position:"center",qtyIncrement:1,max:999,min:0,value:s},r.a.createElement(de.a,{id:"standard-number",value:s,type:"number",className:a.textField,margin:"normal"}))),r.a.createElement(y.a,{variant:"contained",disabled:!s,color:"primary",className:a.button,onClick:this.handleManualScan},"Add Points")))),n.clientRewards&&n.clientRewards.length&&r.a.createElement(oe.a,{className:a.card},r.a.createElement("div",{className:a.details},r.a.createElement(le.a,{className:a.content},r.a.createElement(f.a,{variant:"subtitle1"},"Claim Rewards"),r.a.createElement(E.a,{className:a.controls},r.a.createElement(D.a,{htmlFor:"reward_id"},"Reward"),r.a.createElement(W.a,{value:l,onChange:function(t){return e.handleChange(t,"reward_id")},inputProps:{name:"reward_id",id:"reward_id"},className:a.inputBase},r.a.createElement(F.a,{value:""},r.a.createElement("em",null,"None")),n.clientRewards.map(function(e){return r.a.createElement(F.a,{value:e.id,key:e.id},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.reward_name+" ("+e.reward_points+" points)"}}))}))),r.a.createElement(y.a,{variant:"contained",disabled:!l,color:"primary",className:a.button,onClick:this.handleManualClaim},"Claim this Reward")))),i&&i.vips&&i.vips.length&&r.a.createElement(oe.a,{className:a.card},r.a.createElement("div",{className:a.details},r.a.createElement(le.a,{className:a.content},r.a.createElement(f.a,{variant:"subtitle1"},"VIP Status"),r.a.createElement(E.a,{className:a.controls},r.a.createElement(D.a,{htmlFor:"vip_id"},"VIP Levels"),r.a.createElement(W.a,{value:c,onChange:function(t){return e.handleChange(t,"vip_id")},inputProps:{name:"vip_id",id:"vip_id"},className:a.inputBase},r.a.createElement(F.a,{value:""},r.a.createElement("em",null,"None")),r.a.createElement(F.a,{value:"delete"},r.a.createElement("em",null,"Remove VIP Status")),i.vips.map(function(e){return r.a.createElement(F.a,{value:e.id,key:e.id},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.name+" ("+e.discount+"% discount)"}}))}))),r.a.createElement(y.a,{variant:"contained",disabled:n.vip&&n.vip[0]&&parseInt(n.vip[0].id,0)===parseInt(c,0),color:"primary",className:a.button,onClick:this.handleVIP},"Update VIP Status"))))))}}]),t}(n.Component),pe=P()(function(e){return{vip:{borderWidth:2,borderColor:"#000000",borderRadius:3,borderStyle:"solid",padding:"2px 10px",fontSize:14,display:"block",fontWeight:"bold",marginRight:10,background:"#000000",color:"#FFFFFF"},flexBox:{display:"flex"},flexItem:{flexGrow:1,textAlign:"center"},marginSides:{marginRight:e.spacing.unit,marginLeft:e.spacing.unit},cardWrapper:{display:"flex",padding:3*e.spacing.unit,flexWrap:"wrap"},card:{margin:e.spacing.unit,flexGrow:1,textAlign:"center"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},controls:{display:"flex",alignItems:"center",width:200,marginTop:e.spacing.unit,marginBottom:e.spacing.unit,marginLeft:"auto",marginRight:"auto"},inputBase:{width:"100%"},textField:{"& input":{textAlign:"center",fontSize:36}},button:{margin:e.spacing.unit}}})(me),ge=a(189),be=a.n(ge),fe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={quantity:1,location_token:null,unique:!1},a.updateStateGetQR=a.updateStateGetQR.bind(Object(m.a)(Object(m.a)(a))),a.handleNumPadChange=a.handleNumPadChange.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateStateGetQR()}},{key:"componentDidUpdate",value:function(){this.props.location.location_token!==this.state.location_token&&this.updateStateGetQR()}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.location_token!==t.location_token||this.props.data.displayQR!==e.data.displayQR||this.props.location.location_token===this.state.location_token}},{key:"handleNumPadChange",value:function(e,t){this.state[t]!==parseInt(e)&&this.setState(Object(j.a)({},t,parseInt(e)),function(){this.props.getQR(this.state)})}},{key:"updateStateGetQR",value:function(){this.setState({location_token:this.props.location.location_token},function(){this.props.getQR(this.state)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.data,i=this.state.quantity,o="http://trueblue.guru/redirect.php?id="+n.clientData.id+"&e=";return n.displayQR?r.a.createElement("div",null,r.a.createElement(_.a,{title:o+n.displayQR.code,className:a.qrWrapper},1===n.clientData.merchant_numpad&&r.a.createElement("div",null,r.a.createElement(he.a.Popover,{onChange:function(t){return e.handleNumPadChange(t,"quantity")},position:"center",qtyIncrement:1,max:999,min:1,value:i},r.a.createElement(de.a,{id:"standard-number",value:i,type:"number",className:a.textField,margin:"normal"}))),1!==n.clientData.merchant_numpad&&r.a.createElement(f.a,{color:"textSecondary",variant:"h6"},i," Point(s)"),r.a.createElement(be.a,{value:o+n.displayQR.code,size:400,logo:n.clientData.client_icon}))):r.a.createElement("div",null,"Loading QR Code...")}}]),t}(n.Component),je=P()(function(e){return{qrWrapper:{padding:20,textAlign:"center",margin:20,"& canvas":{width:"50% !important",height:"auto !important",minWidth:240,maxWidth:400}},textField:{marginTop:0,"& input":{textAlign:"center",fontSize:36}}}})(fe),ve=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={quantity:1,location_token:null,reward_id:"",reward_name:null},a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e={};e.location_token=this.props.location.location_token,this.props.data.rewardData&&1===this.props.data.rewardData.length&&(e.reward_id=this.props.data.rewardData[0].id,e.reward_name=this.props.data.rewardData[0].reward_name),this.setState(e,function(){this.props.getQR(this.state)})}},{key:"componentDidUpdate",value:function(){this.props.location.location_token!==this.state.location_token&&this.setState({location_token:this.props.location.location_token},function(){this.props.getQR(this.state)})}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.location_token!==t.location_token||this.props.data.displayQR!==e.data.displayQR||this.props.location.location_token===this.state.location_token}},{key:"handleChange",value:function(e,t){this.setState(Object(j.a)({},t,e.target.value),function(){this.props.getQR(this.state)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.data,i=this.state,o=i.reward_id,s=i.reward_name;return n.rewardData?r.a.createElement("div",null,r.a.createElement(_.a,{title:n.displayQR?n.displayQR.code:"",className:a.qrWrapper},n.rewardData&&n.rewardData.length>1?r.a.createElement(E.a,{className:a.controls},r.a.createElement(D.a,{htmlFor:"reward_id"},"Reward"),r.a.createElement(W.a,{value:o,onChange:function(t){return e.handleChange(t,"reward_id")},inputProps:{name:"reward_id",id:"reward_id"},className:a.inputBase},r.a.createElement(F.a,{value:""},r.a.createElement("em",null,"None")),n.rewardData.map(function(e){return r.a.createElement(F.a,{value:e.id,key:e.id},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.reward_name+" ("+e.reward_points+" points)"}}))}))):r.a.createElement(f.a,{color:"textSecondary",variant:"h6"},s),n.displayQR&&r.a.createElement(be.a,{value:n.displayQR.code,size:400,logo:n.clientData.client_icon}))):r.a.createElement("div",null,"Loading QR Code...")}}]),t}(n.Component),ye=P()(function(e){return{qrWrapper:{padding:20,textAlign:"center",margin:20,"& canvas":{width:"50% !important",height:"auto !important",minWidth:240,maxWidth:400}},controls:{display:"flex",alignItems:"center",width:"100%",maxWidth:400,marginTop:e.spacing.unit,marginBottom:e.spacing.unit,marginLeft:"auto",marginRight:"auto"},inputBase:{width:"100%"}}})(ve),ke=a(669),Oe=a.n(ke),we=(a(1072),a(185)),Ee=a(672),Se=a.n(Ee),Ce=a(130),Re=a.n(Ce),De=a(673),Ne=a.n(De),_e=a(674),xe=a.n(_e),Pe=a(109),Qe=a.n(Pe),Ie=a(670),Ae=a.n(Ie),Te=a(267),Le=a.n(Te),Me=a(671),ze=a.n(Me),Ke=a(186),Ve=a.n(Ke);function Be(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var qe,Fe,Ue=[{id:"name",numeric:!1,disablePadding:!1,label:"Customer"},{id:"created",numeric:!0,disablePadding:!1,label:"Date"},{id:"quantity",numeric:!0,disablePadding:!1,label:"# of items"},{id:"total_value",numeric:!0,disablePadding:!1,label:"Total $"},{id:"paid",numeric:!0,disablePadding:!1,label:"Paid"}],We=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.order,n=t.orderBy;return r.a.createElement(Ae.a,null,r.a.createElement(Le.a,null,Ue.map(function(t){return r.a.createElement(Qe.a,{key:t.id,align:t.numeric?"right":"left",padding:t.disablePadding?"none":"default",sortDirection:n===t.id&&a},r.a.createElement(H.a,{title:"Sort",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},r.a.createElement(ze.a,{active:n===t.id,direction:a,onClick:e.createSortHandler(t.id)},t.label)))},this)))}}]),t}(n.Component),Ge=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={value:0,order:"asc",orderBy:"created",modalOrderID:null,modalOpen:!1},a.handleClose=a.handleClose.bind(Object(m.a)(Object(m.a)(a))),a.handleRequestSort=a.handleRequestSort.bind(Object(m.a)(Object(m.a)(a))),a.handleTabChange=a.handleTabChange.bind(Object(m.a)(Object(m.a)(a))),a.handleClick=a.handleClick.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleRequestSort",value:function(e,t){var a=t,n="desc";this.state.orderBy===t&&"desc"===this.state.order&&(n="asc"),this.setState({order:n,orderBy:a})}},{key:"handleClick",value:function(e,t){this.props.handleGetOrderReceipt(t),this.setState({modalOrderID:t,modalOpen:!0})}},{key:"handleTabChange",value:function(e,t){this.setState({value:t})}},{key:"handleClose",value:function(){this.setState({modalOrderID:null,modalOpen:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.data,i=t.handleOrderStatus,o=t.handleOrderPaid,s=this.state,l=s.value,c=s.order,d=s.orderBy,u=s.modalOpen,h=s.modalOrderID;this.status_0=n.filter(function(e){return"sent"===e.status||"sent_reqPayment"===e.status}),this.status_1=n.filter(function(e){return"processing"===e.status}),this.status_2=n.filter(function(e){return"ready"===e.status}),this.status_3=n.filter(function(e){return"complete"===e.status}),this.status_4=n.filter(function(e){return"cancelled"===e.status});var m="Received ("+this.status_0.length+")",p="Processing ("+this.status_1.length+")",g="Ready ("+this.status_2.length+")",b="Completed ("+this.status_3.length+")",f="Cancelled ("+this.status_4.length+")",j=this["status_"+l],v=null,k=null,O=!1;return h&&(O=n.filter(function(e){return e.id===h})[0].paid,k=n.filter(function(e){return e.id===h})[0].status,v=n.filter(function(e){return e.id===h})[0].receipt),r.a.createElement("div",{className:a.root},r.a.createElement(M.a,{position:"static"},r.a.createElement(Se.a,{value:l,onChange:this.handleTabChange},r.a.createElement(Re.a,{label:m}),r.a.createElement(Re.a,{label:p}),r.a.createElement(Re.a,{label:g}),r.a.createElement(Re.a,{label:b}),r.a.createElement(Re.a,{label:f}))),r.a.createElement("div",{className:a.tableWrapper},r.a.createElement(Ne.a,{className:a.table},r.a.createElement(We,{order:c,orderBy:d,onRequestSort:this.handleRequestSort}),r.a.createElement(xe.a,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]}),a.map(function(e){return e[0]})}(j,function(e,t){return"desc"===e?function(e,a){return Be(e,a,t)}:function(e,a){return-Be(e,a,t)}}(c,d)).map(function(t){return!1!==t&&r.a.createElement(Le.a,{hover:!0,onClick:function(a){return e.handleClick(a,t.id)},role:"checkbox",tabIndex:-1,key:t.id},r.a.createElement(Qe.a,{component:"th",scope:"row"},t.name),r.a.createElement(Qe.a,{align:"right"},r.a.createElement(Oe.a,{format:"YYYY/MM/DD HH:mm"},1e3*t.created)),r.a.createElement(Qe.a,{align:"right"},t.quantity),r.a.createElement(Qe.a,{align:"right"},Number(t.total_value).toFixed(2)),r.a.createElement(Qe.a,{align:"right"},1===t.paid?"Yes":"No"))})))),r.a.createElement(Ve.a,{open:u,onClose:this.handleClose,className:a.modalOverflow},r.a.createElement("div",{style:{top:"".concat(0,"%"),left:"".concat(0,"%"),display:"inline-block"},className:a.paper},r.a.createElement("div",{className:a.closeBtn,onClick:this.handleClose},r.a.createElement("i",{className:"fal fa-times fa-lg"})),!v&&r.a.createElement("div",{className:a.modal_main},"Loading..."),v&&r.a.createElement("div",{className:a.modal_main,dangerouslySetInnerHTML:{__html:v}}),"complete"!==k&&r.a.createElement("div",{className:a.modal_actions},("sent"===k||"sent_reqPayment"===k)&&r.a.createElement("div",null,r.a.createElement(y.a,{color:"primary",className:a.button,onClick:function(e){return i(h,"processing")}},"Confirm Order"),r.a.createElement("br",null),r.a.createElement(y.a,{color:"secondary",className:a.button,onClick:function(e){return i(h,"cancelled")}},"Cancel Order")),"processing"===k&&r.a.createElement("div",null,r.a.createElement(y.a,{color:"primary",className:a.button,onClick:function(e){return i(h,"ready")}},"Order is ready for pick-up"),r.a.createElement("br",null),r.a.createElement(y.a,{color:"secondary",className:a.button,onClick:function(e){return i(h,"sent")}},"Unconfirm Order")),"ready"===k&&r.a.createElement("div",null,r.a.createElement(y.a,{color:"primary",className:a.button,onClick:function(e){return i(h,"complete")}},"Order has been picked up"),r.a.createElement("br",null),r.a.createElement(y.a,{color:"secondary",className:a.button,onClick:function(e){return i(h,"processing")}},"Order is not ready yet")),"cancelled"===k&&r.a.createElement("div",null,r.a.createElement(y.a,{color:"primary",className:a.button,onClick:function(e){return i(h,"sent")}},"Uncancel Order")),0===O&&r.a.createElement(y.a,{color:"default",className:a.button,onClick:function(e){return o(h)}},"Mark as Paid")))))}}]),t}(n.Component),He=Object(we.withStyles)(function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper},table:{minWidth:700},tableWrapper:{overflowX:"auto"},modalOverflow:{overflow:"auto"},paper:{position:"absolute",width:"auto",outline:"none",padding:2*e.spacing.unit,boxSizing:"border-box","& .inner":{border:"none !important",boxShadow:"none !important"}},modal_main:{display:"inline-block",verticalAlign:"top",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],"& .inner":{border:"none !important",boxShadow:"none !important"}},modal_actions:{display:"inline-block",marginLeft:10,verticalAlign:"top",backgroundColor:e.palette.background.paper,padding:2*e.spacing.unit,boxShadow:e.shadows[5],width:150},button:{width:"100%"},input:{display:"none"},closeBtn:{margin:16,padding:10,position:"fixed",top:0,right:0,color:"#FFFFFF",zIndex:"9999","& .fa-lg":{fontSize:30}}}})(Ge),Ye=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location;(0,e.handleGetOrders)(t.id)}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props.data;if(e.orderData){for(var t=e.orderData,a=0;a<t.length;a++){var n=JSON.parse(t[a].json_obj);t[a].quantity=n.quantity}return r.a.createElement(He,{data:t,handleGetOrderReceipt:this.props.handleGetOrderReceipt,handleOrderStatus:this.props.handleOrderStatus,handleOrderPaid:this.props.handleOrderPaid})}return r.a.createElement(f.a,{component:"div",style:{padding:24}},"Loading orders...")}}]),t}(n.Component),Je=P()(function(e){return{}})(Ye),Xe={locationsOpen:!1,selectedLocation:"",userApiKey:null,showArea:"",dialogOpen:!1,resetQROpen:!1},$e=function(e){function t(e){var a;return Object(l.a)(this,t),a=Object(d.a)(this,Object(u.a)(t).call(this,e)),qe=Object(m.a)(Object(m.a)(a)),a.state=Xe,a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.handleClose=a.handleClose.bind(Object(m.a)(Object(m.a)(a))),a.handleOpen=a.handleOpen.bind(Object(m.a)(Object(m.a)(a))),a.clearLocation=a.clearLocation.bind(Object(m.a)(Object(m.a)(a))),a.handleLogout=a.handleLogout.bind(Object(m.a)(Object(m.a)(a))),a.handleScan=a.handleScan.bind(Object(m.a)(Object(m.a)(a))),a.showThisArea=a.showThisArea.bind(Object(m.a)(Object(m.a)(a))),a.gotoSettings=a.gotoSettings.bind(Object(m.a)(Object(m.a)(a))),a.scanQR=a.scanQR.bind(Object(m.a)(Object(m.a)(a))),a.handleCloseDialog=a.handleCloseDialog.bind(Object(m.a)(Object(m.a)(a))),a.handleConfirmDialog=a.handleConfirmDialog.bind(Object(m.a)(Object(m.a)(a))),a.continueScan=a.continueScan.bind(Object(m.a)(Object(m.a)(a))),a.openResetQR=a.openResetQR.bind(Object(m.a)(Object(m.a)(a))),a.closeResetQR=a.closeResetQR.bind(Object(m.a)(Object(m.a)(a))),a.confirmResetQR=a.confirmResetQR.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("selectedLocation")?this.setState({selectedLocation:parseInt(localStorage.getItem("selectedLocation"))}):this.props.data.clientData.locations&&(1===this.props.data.clientData.locations.length?(localStorage.setItem("selectedLocation",this.props.data.clientData.locations[0].id),this.setState({selectedLocation:parseInt(this.props.data.clientData.locations[0].id)})):this.setState({locationsOpen:!0}))}},{key:"handleChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value),function(){"selectedLocation"===e.target.name&&localStorage.setItem("selectedLocation",e.target.value)})}},{key:"handleClose",value:function(){this.setState({locationsOpen:!1})}},{key:"handleOpen",value:function(){this.setState({locationsOpen:!0})}},{key:"clearLocation",value:function(){this.setState({selectedLocation:""})}},{key:"handleLogout",value:function(){this.setState(Xe,function(){this.props.handleLogout()})}},{key:"showThisArea",value:function(e){this.props.getQR("clear"),this.state.showArea!==e?this.setState({showArea:e}):this.setState({showArea:""})}},{key:"handleScan",value:function(e){e&&this.setState({showArea:"",userApiKey:e},function(){this.props.handleGetUser(this.state.userApiKey)})}},{key:"handleError",value:function(e){console.error(e)}},{key:"gotoSettings",value:function(){cordova.plugins.diagnostic.switchToSettings(function(){console.log("Successfully switched to Settings app")},function(e){this.props.handleSnackbar("Error: "+e,"error")})}},{key:"scanQR",value:function(){cordova.plugins.diagnostic.requestCameraAuthorization(function(e){!0===e||"GRANTED"===e||"authorized"===e||e===cordova.plugins.diagnostic.permissionStatus.GRANTED?qe.continueScan():!1===e||"DENIED"===e||e===cordova.plugins.diagnostic.permissionStatus.DENIED?qe.setState({dialogOpen:!0}):qe.props.handleSnackbar("Error: To complete this action, please allow access to the camera and storage in your settings.","error")},function(e){qe.props.handleSnackbar("Error: "+e,"error")})}},{key:"handleCloseDialog",value:function(){this.setState({dialogOpen:!1})}},{key:"handleConfirmDialog",value:function(){this.gotoSettings()}},{key:"continueScan",value:function(){cordova.plugins.barcodeScanner.scan(function(e){e.cancelled||qe.handleScan(e.text)},function(e){qe.props.handleSnackbar("Error: Scanning failed!","error")})}},{key:"openResetQR",value:function(){this.setState({resetQROpen:!0})}},{key:"closeResetQR",value:function(){this.setState({resetQROpen:!1})}},{key:"confirmResetQR",value:function(){var e=this.props.data,t=this.state.selectedLocation,a=""!==t?e.clientData.locations.filter(function(e){return(e.id===parseInt(t,0))[0]}):null;t&&a?this.props.handleResetQR(a.id):this.props.handleSnackbar("Error: A location is required.","error"),this.closeResetQR()}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.data,i=t.getQR,o=this.state,s=o.locationsOpen,l=o.dialogOpen,c=o.resetQROpen,d=o.selectedLocation,u=o.showArea,h=""!==d?n.clientData.locations.filter(function(e){return e.id===parseInt(d,0)})[0]:null,m=n.clientData&&"merchant"===n.clientData.client_mode,p=h&&h.cart_email,g=!m&&n.rewardData&&n.rewardData.length,b=!(!n.merchantPageData||!n.merchantPageData[0]),j=!(!n.merchantPageData||!n.merchantPageData[0]||!n.merchantPageData[0].icon.includes("left")&&!n.merchantPageData[0].icon.includes("right")),v=n.userData?"userArea":u;return v=j&&!v?"pointsQR":v,r.a.createElement("div",{className:a.height100},r.a.createElement(re.a,{maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:l},r.a.createElement($.a,{id:"confirmation-dialog-title"},"Permissions Error"),r.a.createElement(ee.a,null,"To complete this action, please allow access to the camera and storage in your settings."),r.a.createElement(ae.a,null,r.a.createElement(y.a,{onClick:this.handleCloseDialog,color:"primary"},"Nevermind"),r.a.createElement(y.a,{onClick:this.handleConfirmDialog,color:"primary"},"Go to Settings"))),r.a.createElement(re.a,{maxWidth:"xs","aria-labelledby":"reset-qr-dialog-title",open:c},r.a.createElement($.a,{id:"confirmation-dialog-title"},"Reset QR Codes"),r.a.createElement(ee.a,null,"Are you sure you want to reset all of your QR codes?"),r.a.createElement(ae.a,null,r.a.createElement(y.a,{onClick:this.closeResetQR,color:"primary"},"Nevermind"),r.a.createElement(y.a,{onClick:this.confirmResetQR,color:"primary"},"Yes, Reset them"))),n.clientData.client_css&&r.a.createElement("style",null,n.clientData.client_css),!h&&r.a.createElement(M.a,{position:"static",color:"primary",className:"appBar"},r.a.createElement(K.a,null,r.a.createElement(E.a,{className:a.formControl},r.a.createElement(D.a,{htmlFor:"location-select"},"Select a location"),r.a.createElement(W.a,{open:s,onClose:this.handleClose,onOpen:this.handleOpen,value:d,onChange:this.handleChange,inputProps:{name:"selectedLocation",id:"location-select"}},r.a.createElement(F.a,{className:a.instructions,value:"",disabled:!0},"Select a location:"),n.clientData.locations.map(function(e){return r.a.createElement(F.a,{value:e.id,key:e.id},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.location_name}}))}))),r.a.createElement(H.a,{title:"Logout"},r.a.createElement(B.a,{color:"inherit","aria-label":"Logout",onClick:this.handleLogout},r.a.createElement("i",{className:"fas fa-sign-out"}))))),d&&h&&r.a.createElement(M.a,{position:"static",color:"primary",className:"appBar"},r.a.createElement(K.a,null,n.clientData.locations&&n.clientData.locations.length>1&&r.a.createElement(H.a,{title:"Select a new location"},r.a.createElement(B.a,{color:"inherit","aria-label":"Select a new location",onClick:this.clearLocation},r.a.createElement("i",{className:"fas fa-building"}))),r.a.createElement(f.a,{variant:"h5",color:"inherit",className:a.leftBar},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:h.location_name}})),m&&r.a.createElement(H.a,{title:"Scan a User QR Code"},r.a.createElement(B.a,{className:"qrScanner"===v||"userArea"===v?a.selectedButton:"",color:"inherit","aria-label":"Scan a User QR Code",onClick:this.scanQR},r.a.createElement("i",{className:"fas fa-user"}))),!m&&r.a.createElement(H.a,{title:"Reset QR Codes"},r.a.createElement(B.a,{color:"inherit","aria-label":"Show Point QR Code",onClick:function(t){return e.openResetQR()}},r.a.createElement("i",{className:"fas fa-sync"}))),!m&&r.a.createElement(H.a,{title:"Show Point QR Code"},r.a.createElement(B.a,{className:"pointsQR"===v?a.selectedButton:"",color:"inherit","aria-label":"Show Point QR Code",onClick:function(t){return e.showThisArea("pointsQR")}},r.a.createElement("i",{className:"fas fa-coins"}))),g&&r.a.createElement(H.a,{title:"Show Reward QR Code"},r.a.createElement(B.a,{className:"rewardsQR"===v?a.selectedButton:"",color:"inherit","aria-label":"Show Reward QR Code",onClick:function(t){return e.showThisArea("rewardsQR")}},r.a.createElement("i",{className:"fas fa-stars"}))),p&&r.a.createElement(H.a,{title:"Orders"},r.a.createElement(B.a,{className:"ordersArea"===v?a.selectedButton:"",color:"inherit","aria-label":"Orders",onClick:function(t){return e.showThisArea("ordersArea")}},r.a.createElement("i",{className:"fas fa-receipt"}))),r.a.createElement(H.a,{title:"Logout"},r.a.createElement(B.a,{color:"inherit","aria-label":"Logout",onClick:this.handleLogout},r.a.createElement("i",{className:"fas fa-sign-out"}))))),h&&(""===v||j)&&!b&&r.a.createElement("div",{className:a.fullscreen},r.a.createElement("div",{className:"verticallyCenter"},m&&r.a.createElement(J.a,{focusRipple:!0,focusVisibleClassName:a.focusVisible,onClick:this.scanQR,className:a.buttonBase},r.a.createElement("div",{className:a.largeIcon},r.a.createElement("i",{className:"fas fa-user fa-lg"})),r.a.createElement(f.a,{variant:"h6",color:"inherit"},"Scan User QR Code")),!m&&r.a.createElement(J.a,{focusRipple:!0,focusVisibleClassName:a.focusVisible,onClick:function(t){return e.showThisArea("pointsQR")},className:a.buttonBase},r.a.createElement("div",{className:a.largeIcon},r.a.createElement("i",{className:"fas fa-coins fa-lg"})),r.a.createElement(f.a,{variant:"h6",color:"inherit"},"Point QR Code")),g&&r.a.createElement(J.a,{focusRipple:!0,focusVisibleClassName:a.focusVisible,onClick:function(t){return e.showThisArea("rewardsQR")},className:a.buttonBase},r.a.createElement("div",{className:a.largeIcon},r.a.createElement("i",{className:"fas fa-stars fa-lg"})),r.a.createElement(f.a,{variant:"h6",color:"inherit"},"Reward QR Code")),p&&r.a.createElement(J.a,{focusRipple:!0,focusVisibleClassName:a.focusVisible,onClick:function(t){return e.showThisArea("ordersArea")},className:a.buttonBase},r.a.createElement("div",{className:a.largeIcon},r.a.createElement("i",{className:"fas fa-receipt fa-lg"})),r.a.createElement(f.a,{variant:"h6",color:"inherit"},"Orders")))),(""===v||j)&&b&&r.a.createElement("div",{className:n.merchantPageData[0].icon},n.merchantPageData[0].css&&r.a.createElement("style",null,n.merchantPageData[0].css),r.a.createElement("div",{className:a.page+" page",dangerouslySetInnerHTML:{__html:n.merchantPageData[0].content}})),"qrScanner"===v&&h&&r.a.createElement(T.a,{delay:this.state.delay,onError:this.handleError,onScan:this.handleScan,className:a.qrScanner}),"pointsQR"===v&&h&&r.a.createElement(je,{data:n,location:h,getQR:i}),"rewardsQR"===v&&h&&r.a.createElement(ye,{data:n,location:h,getQR:i}),"ordersArea"===v&&h&&r.a.createElement(Je,{data:n,orderData:n.orderData,location:h,handleGetOrders:this.props.handleGetOrders,handleGetOrderReceipt:this.props.handleGetOrderReceipt,handleOrderStatus:this.props.handleOrderStatus,handleOrderPaid:this.props.handleOrderPaid}),"userArea"===v&&h&&r.a.createElement(pe,{data:n.userData,clientData:n.clientData,token:h.location_token,handleManualScan:this.props.handleManualScan,handleManualClaim:this.props.handleManualClaim,handleVIPadd:this.props.handleVIPadd,handleVIPdelete:this.props.handleVIPdelete}))}}]),t}(n.Component),Ze=P()(function(e){return{height100:{height:"100%"},formControl:{margin:e.spacing.unit,flexGrow:1,color:"#FFF"},instructions:{background:"#333 !important",color:"#FFF",height:10,fontSize:14,opacity:1},leftBar:{flexGrow:1},qrScanner:{width:"100%","& section":{paddingTop:"calc(100vh - 60px) !important"}},fullscreen:{height:"100%",textAlign:"center"},focusVisible:{},largeIcon:{padding:"20px 0","& .fa-lg":{fontSize:50}},buttonBase:{verticalAlign:"top",display:"inline-block",width:200,"& i":{padding:"10px auto"}},selectedButton:{background:"rgba(0,0,0,0.5)"},page:{minHeight:"calc(100vh - 64px)",boxSizing:"border-box"}}})($e),et=(a(1101),"http://live.trueblue.guru/application/v1.5/admin"),tt={apiKey:null,adminData:null,clientData:null,userData:null,orderData:null,snackbarOpen:!1,snackbarMessage:"",snackbarClass:"",merchantPageData:null,displayQR:null},at=function(e){function t(e){var a;return Object(l.a)(this,t),a=Object(d.a)(this,Object(u.a)(t).call(this,e)),Fe=Object(m.a)(Object(m.a)(a)),a.state=tt,a.showSnackbar=a.showSnackbar.bind(Object(m.a)(Object(m.a)(a))),a.hideSnackbar=a.hideSnackbar.bind(Object(m.a)(Object(m.a)(a))),a.handleLogout=a.handleLogout.bind(Object(m.a)(Object(m.a)(a))),a.adminLogin=a.adminLogin.bind(Object(m.a)(Object(m.a)(a))),a.apiLogin=a.apiLogin.bind(Object(m.a)(Object(m.a)(a))),a.getClient=a.getClient.bind(Object(m.a)(Object(m.a)(a))),a.getUser=a.getUser.bind(Object(m.a)(Object(m.a)(a))),a.getOrders=a.getOrders.bind(Object(m.a)(Object(m.a)(a))),a.getRewards=a.getRewards.bind(Object(m.a)(Object(m.a)(a))),a.getMerchantPage=a.getMerchantPage.bind(Object(m.a)(Object(m.a)(a))),a.getQR=a.getQR.bind(Object(m.a)(Object(m.a)(a))),a.handleManualScan=a.handleManualScan.bind(Object(m.a)(Object(m.a)(a))),a.handleManualClaim=a.handleManualClaim.bind(Object(m.a)(Object(m.a)(a))),a.handleVIPadd=a.handleVIPadd.bind(Object(m.a)(Object(m.a)(a))),a.handleVIPdelete=a.handleVIPdelete.bind(Object(m.a)(Object(m.a)(a))),a.handleResetQR=a.handleResetQR.bind(Object(m.a)(Object(m.a)(a))),a.getOrderReceipt=a.getOrderReceipt.bind(Object(m.a)(Object(m.a)(a))),a.handleOrderStatus=a.handleOrderStatus.bind(Object(m.a)(Object(m.a)(a))),a.handleOrderPaid=a.handleOrderPaid.bind(Object(m.a)(Object(m.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"showSnackbar",value:function(e,t){this.setState({snackbarOpen:!0,snackbarMessage:e,snackbarClass:t})}},{key:"hideSnackbar",value:function(){this.setState({snackbarOpen:!1,snackbarMessage:"",snackbarClass:""})}},{key:"handleLogout",value:function(){localStorage.removeItem("apiKey"),localStorage.removeItem("selectedLocation"),this.setState(tt)}},{key:"componentDidMount",value:function(){localStorage.getItem("apiKey")&&Fe.setState({apiKey:localStorage.getItem("apiKey")},function(){Fe.apiLogin({api_key:Fe.state.apiKey})})}},{key:"componentDidUpdate",value:function(){}},{key:"adminLogin",value:function(e){console.log("adminLogin",e,et),fetch(et+"/login",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?Fe.showSnackbar("Error: "+e.message,"error"):Fe.setState({adminData:e,apiKey:e.apiKey},function(){localStorage.setItem("apiKey",Fe.state.apiKey),Fe.getClient(Fe.state.adminData.client_id)})})}},{key:"apiLogin",value:function(e){fetch(et+"/api_login",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?Fe.setState({apiKey:null}):Fe.setState({adminData:e,apiKey:e.apiKey},function(){Fe.getClient(Fe.state.adminData.client_id)})})}},{key:"getClient",value:function(){fetch(et+"/client",{method:"get",headers:{Authorization:this.state.apiKey,Tbapikey:this.state.apiKey}}).then(function(e){return e.json()}).then(function(e){e.error||(Fe.setState({clientData:e.client[0]}),Fe.getRewards(),Fe.getMerchantPage())})}},{key:"getUser",value:function(e){fetch(et+"/users/"+e,{method:"get",headers:{Authorization:this.state.apiKey,Tbapikey:this.state.apiKey}}).then(function(e){return e.json()}).then(function(e){e.error?Fe.showSnackbar("Error: "+e.message,"error"):Fe.setState({userData:e})})}},{key:"getRewards",value:function(){fetch(et+"/rewards",{method:"get",headers:{Authorization:this.state.apiKey,Tbapikey:this.state.apiKey}}).then(function(e){return e.json()}).then(function(e){e.error||Fe.setState({rewardData:e.rewards})})}},{key:"getMerchantPage",value:function(){fetch(et+"/pages",{method:"get",headers:{Authorization:this.state.apiKey,Tbapikey:this.state.apiKey}}).then(function(e){return e.json()}).then(function(e){e.error||Fe.setState({merchantPageData:e.pages})})}},{key:"handleResetQR",value:function(e){var t=this.randomString(10);fetch(et+"/locations/"+e,{method:"put",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey},body:this.xwwwfurlenc({token:t})}).then(function(e){return e.json()}).then(function(e){e.error?Fe.showSnackbar("Error: "+e.message,"error"):(Fe.showSnackbar("QR Codes have been reset.","success"),Fe.getClient())})}},{key:"getQR",value:function(e){"clear"===e?Fe.setState({displayQR:null}):fetch(et+"/qr",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?Fe.setState({displayQR:null}):Fe.setState({displayQR:e})})}},{key:"handleManualScan",value:function(e){fetch(et+"/scan_points",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?Fe.showSnackbar("Error: "+e.message,"error"):(Fe.showSnackbar("Points have been updated.","success"),Fe.getUser(Fe.state.userData.userDetails[0].api_key))})}},{key:"handleManualClaim",value:function(e){fetch(et+"/claim_scan",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?Fe.showSnackbar("Error: "+e.message,"error"):(Fe.showSnackbar("Reward has been claimed.","success"),Fe.getUser(Fe.state.userData.userDetails[0].api_key))})}},{key:"handleVIPadd",value:function(e){fetch(et+"/vip",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?Fe.showSnackbar("Error: "+e.message,"error"):(Fe.showSnackbar("VIP status has been updated.","success"),Fe.getUser(Fe.state.userData.userDetails[0].api_key))})}},{key:"handleVIPdelete",value:function(e){fetch(et+"/vip/"+e,{method:"delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey}}).then(function(e){return e.json()}).then(function(e){e.error?Fe.showSnackbar("Error: "+e.message,"error"):(Fe.showSnackbar("VIP status has been removed.","success"),Fe.getUser(Fe.state.userData.userDetails[0].api_key))})}},{key:"getOrders",value:function(e){fetch(et+"/orders/location/"+e,{method:"get",headers:{Authorization:this.state.apiKey,Tbapikey:this.state.apiKey}}).then(function(e){return e.json()}).then(function(e){e.error?Fe.showSnackbar("Error: "+e.message,"error"):Fe.setState({orderData:e.orders})})}},{key:"getOrderReceipt",value:function(e){fetch(et+"/orders/receipt/"+e,{method:"get",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey}}).then(function(e){return e.json()}).then(function(t){t.error?Fe.showSnackbar("Error: "+t.message,"error"):Fe.setState({orderData:Fe.state.orderData.map(function(a){return a.id===e?Object(s.a)({},a,{receipt:t.orders[0].receipt}):a})})})}},{key:"handleOrderStatus",value:function(e,t){fetch(et+"/order/"+e,{method:"put",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey},body:this.xwwwfurlenc({status:t})}).then(function(e){return e.json()}).then(function(a){a.error?Fe.showSnackbar("Error: "+a.message,"error"):Fe.setState({orderData:Fe.state.orderData.map(function(a){return a.id===e?Object(s.a)({},a,{status:t}):a})},function(){Fe.showSnackbar("The order has been updated.","success")})})}},{key:"handleOrderPaid",value:function(e){fetch(et+"/order/"+e,{method:"put",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey},body:this.xwwwfurlenc({paid:1})}).then(function(e){return e.json()}).then(function(t){t.error?Fe.showSnackbar("Error: "+t.message,"error"):Fe.setState({orderData:Fe.state.orderData.map(function(t){return t.id===e?Object(s.a)({},t,{paid:1}):t})},function(){Fe.getOrderReceipt(e),Fe.showSnackbar("The order has been updated.","success")})})}},{key:"xwwwfurlenc",value:function(e){if("object"!==typeof e&&"undefined"!==typeof console)return console.log('"srcjson" is not a JSON object'),null;for(var t=encodeURIComponent,a="",n=Object.keys(e),r=0;r<n.length;r++)a+=t(n[r])+"="+t(e[n[r]]),r<n.length-1&&(a+="&");return a}},{key:"randomString",value:function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}},{key:"render",value:function(){var e=this.state,t=e.snackbarOpen,a=e.snackbarMessage,n=e.snackbarClass;return this.state.apiKey?this.state.apiKey?this.state.clientData?r.a.createElement("div",null,r.a.createElement(g.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:t,onClose:this.hideSnackbar,message:a,className:n}),r.a.createElement(Ze,{data:this.state,handleGetUser:this.getUser,handleManualScan:this.handleManualScan,handleManualClaim:this.handleManualClaim,handleVIPadd:this.handleVIPadd,handleVIPdelete:this.handleVIPdelete,handleLogout:this.handleLogout,handleSnackbar:this.showSnackbar,handleResetQR:this.handleResetQR,handleGetOrders:this.getOrders,handleGetOrderReceipt:this.getOrderReceipt,handleOrderStatus:this.handleOrderStatus,handleOrderPaid:this.handleOrderPaid,getQR:this.getQR})):r.a.createElement("div",null,"Loading..."):void 0:r.a.createElement("center",null,r.a.createElement(g.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:t,onClose:this.hideSnackbar,message:a,className:n}),r.a.createElement("img",{src:"icon.png",alt:"TrueBlue",className:"login-icon",style:{margin:"30px 0 10px"}}),r.a.createElement(f.a,{variant:"h4",className:"login-h4",color:"inherit"},"TrueBlue Merchant"),r.a.createElement(I,{login_handler:this.adminLogin}))}}]),t}(n.Component),nt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function rt(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var it=function(){o.a.render(r.a.createElement(at,null),document.getElementById("root")),navigator&&navigator.splashscreen?(console.log("navigator!"),navigator.splashscreen.hide()):console.log("no navigator...")};window.onload=function(){console.log("window onload"),window.cordova?(console.log("cordova!"),document.addEventListener("deviceready",it,!1)):(console.log("no cordova..."),setTimeout(function(){it()},1e3))},function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat(".","/service-worker.js");nt?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):rt(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):rt(t,e)})}}()},447:function(e,t,a){},515:function(e,t,a){var n={"./af":516,"./af.js":516,"./ar":517,"./ar-dz":518,"./ar-dz.js":518,"./ar-kw":519,"./ar-kw.js":519,"./ar-ly":520,"./ar-ly.js":520,"./ar-ma":521,"./ar-ma.js":521,"./ar-sa":522,"./ar-sa.js":522,"./ar-tn":523,"./ar-tn.js":523,"./ar.js":517,"./az":524,"./az.js":524,"./be":525,"./be.js":525,"./bg":526,"./bg.js":526,"./bm":527,"./bm.js":527,"./bn":528,"./bn.js":528,"./bo":529,"./bo.js":529,"./br":530,"./br.js":530,"./bs":531,"./bs.js":531,"./ca":532,"./ca.js":532,"./cs":533,"./cs.js":533,"./cv":534,"./cv.js":534,"./cy":535,"./cy.js":535,"./da":536,"./da.js":536,"./de":537,"./de-at":538,"./de-at.js":538,"./de-ch":539,"./de-ch.js":539,"./de.js":537,"./dv":540,"./dv.js":540,"./el":541,"./el.js":541,"./en-SG":542,"./en-SG.js":542,"./en-au":543,"./en-au.js":543,"./en-ca":544,"./en-ca.js":544,"./en-gb":545,"./en-gb.js":545,"./en-ie":546,"./en-ie.js":546,"./en-il":547,"./en-il.js":547,"./en-nz":548,"./en-nz.js":548,"./eo":549,"./eo.js":549,"./es":550,"./es-do":551,"./es-do.js":551,"./es-us":552,"./es-us.js":552,"./es.js":550,"./et":553,"./et.js":553,"./eu":554,"./eu.js":554,"./fa":555,"./fa.js":555,"./fi":556,"./fi.js":556,"./fo":557,"./fo.js":557,"./fr":558,"./fr-ca":559,"./fr-ca.js":559,"./fr-ch":560,"./fr-ch.js":560,"./fr.js":558,"./fy":561,"./fy.js":561,"./ga":562,"./ga.js":562,"./gd":563,"./gd.js":563,"./gl":564,"./gl.js":564,"./gom-latn":565,"./gom-latn.js":565,"./gu":566,"./gu.js":566,"./he":567,"./he.js":567,"./hi":568,"./hi.js":568,"./hr":569,"./hr.js":569,"./hu":570,"./hu.js":570,"./hy-am":571,"./hy-am.js":571,"./id":572,"./id.js":572,"./is":573,"./is.js":573,"./it":574,"./it-ch":575,"./it-ch.js":575,"./it.js":574,"./ja":576,"./ja.js":576,"./jv":577,"./jv.js":577,"./ka":578,"./ka.js":578,"./kk":579,"./kk.js":579,"./km":580,"./km.js":580,"./kn":581,"./kn.js":581,"./ko":582,"./ko.js":582,"./ku":583,"./ku.js":583,"./ky":584,"./ky.js":584,"./lb":585,"./lb.js":585,"./lo":586,"./lo.js":586,"./lt":587,"./lt.js":587,"./lv":588,"./lv.js":588,"./me":589,"./me.js":589,"./mi":590,"./mi.js":590,"./mk":591,"./mk.js":591,"./ml":592,"./ml.js":592,"./mn":593,"./mn.js":593,"./mr":594,"./mr.js":594,"./ms":595,"./ms-my":596,"./ms-my.js":596,"./ms.js":595,"./mt":597,"./mt.js":597,"./my":598,"./my.js":598,"./nb":599,"./nb.js":599,"./ne":600,"./ne.js":600,"./nl":601,"./nl-be":602,"./nl-be.js":602,"./nl.js":601,"./nn":603,"./nn.js":603,"./pa-in":604,"./pa-in.js":604,"./pl":605,"./pl.js":605,"./pt":606,"./pt-br":607,"./pt-br.js":607,"./pt.js":606,"./ro":608,"./ro.js":608,"./ru":609,"./ru.js":609,"./sd":610,"./sd.js":610,"./se":611,"./se.js":611,"./si":612,"./si.js":612,"./sk":613,"./sk.js":613,"./sl":614,"./sl.js":614,"./sq":615,"./sq.js":615,"./sr":616,"./sr-cyrl":617,"./sr-cyrl.js":617,"./sr.js":616,"./ss":618,"./ss.js":618,"./sv":619,"./sv.js":619,"./sw":620,"./sw.js":620,"./ta":621,"./ta.js":621,"./te":622,"./te.js":622,"./tet":623,"./tet.js":623,"./tg":624,"./tg.js":624,"./th":625,"./th.js":625,"./tl-ph":626,"./tl-ph.js":626,"./tlh":627,"./tlh.js":627,"./tr":628,"./tr.js":628,"./tzl":629,"./tzl.js":629,"./tzm":630,"./tzm-latn":631,"./tzm-latn.js":631,"./tzm.js":630,"./ug-cn":632,"./ug-cn.js":632,"./uk":633,"./uk.js":633,"./ur":634,"./ur.js":634,"./uz":635,"./uz-latn":636,"./uz-latn.js":636,"./uz.js":635,"./vi":637,"./vi.js":637,"./x-pseudo":638,"./x-pseudo.js":638,"./yo":639,"./yo.js":639,"./zh-cn":640,"./zh-cn.js":640,"./zh-hk":641,"./zh-hk.js":641,"./zh-tw":642,"./zh-tw.js":642};function r(e){var t=i(e);return a(t)}function i(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=515},675:function(e,t,a){e.exports=a(1110)}},[[675,2,1]]]);
//# sourceMappingURL=main.e2708735.chunk.js.map