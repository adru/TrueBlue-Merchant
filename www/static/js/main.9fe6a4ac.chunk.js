(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1067:function(e,a,t){},1076:function(e,a,t){"use strict";t.r(a);t(266),t(438);var n,i,s=t(0),o=t.n(s),r=t(15),l=t.n(r),c=(t(440),t(34)),d=t(35),u=t(37),h=t(36),m=t(38),p=t(5),g=(t(743),t(265)),f=t.n(g),b=t(16),j=t.n(b),v=t(48),y=t(49),w=t.n(y),k=t(257),E=t.n(k),S=t(57),O=t.n(S),R=t(126),C=t.n(R),D=t(58),N=t.n(D),_=t(56),Q=t.n(_),x=t(8),P=t.n(x),I=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={username:"",password:""},t.handleChange=t.handleChange.bind(Object(p.a)(Object(p.a)(t))),t.handleSubmit=t.handleSubmit.bind(Object(p.a)(Object(p.a)(t))),t}return Object(m.a)(a,e),Object(d.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(v.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){console.log("handleSubmit"),e.preventDefault(),this.props.login_handler(this.state)}},{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",null,o.a.createElement(E.a,null),o.a.createElement("main",{className:e.layout},o.a.createElement(Q.a,{className:e.paper},o.a.createElement(j.a,{component:"h1",variant:"h5"},"Sign in"),o.a.createElement("form",{className:e.form,onSubmit:this.handleSubmit},o.a.createElement(O.a,{margin:"normal",required:!0,fullWidth:!0},o.a.createElement(N.a,{htmlFor:"username"},"Email Address or Username"),o.a.createElement(C.a,{id:"username",name:"username",autoComplete:"email",value:this.state.username,onChange:this.handleChange,autoFocus:!0})),o.a.createElement(O.a,{margin:"normal",required:!0,fullWidth:!0},o.a.createElement(N.a,{htmlFor:"password"},"Password"),o.a.createElement(C.a,{name:"password",type:"password",id:"password",autoComplete:"current-password",value:this.state.password,onChange:this.handleChange})),o.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign in")))))}}]),a}(o.a.Component),A=P()(function(e){return{layout:Object(v.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(I),L=t(656),T=t.n(L),M=t(141),z=t.n(M),V=t(142),K=t.n(V),B=t(77),U=t.n(B),W=t(50),F=t.n(W),q=t(88),G=t.n(q),H=t(76),J=t.n(H),Y=t(87),X=t.n(Y),Z=t(262),$=t.n(Z),ee=t(263),ae=t.n(ee),te=t(264),ne=t.n(te),ie=t(261),se=t.n(ie),oe=t(183),re=t.n(oe),le=t(184),ce=t.n(le),de=t(181),ue=t.n(de),he=t(180),me=t.n(he),pe=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={addAmount:0,reward_id:"",vip_id:""},t.handleChange=t.handleChange.bind(Object(p.a)(Object(p.a)(t))),t.handleNumPadChange=t.handleNumPadChange.bind(Object(p.a)(Object(p.a)(t))),t.add=t.add.bind(Object(p.a)(Object(p.a)(t))),t.subtract=t.subtract.bind(Object(p.a)(Object(p.a)(t))),t.handleManualScan=t.handleManualScan.bind(Object(p.a)(Object(p.a)(t))),t.handleManualClaim=t.handleManualClaim.bind(Object(p.a)(Object(p.a)(t))),t.handleVIP=t.handleVIP.bind(Object(p.a)(Object(p.a)(t))),t.handleVIPadd=t.handleVIPadd.bind(Object(p.a)(Object(p.a)(t))),t.handleVIPdelete=t.handleVIPdelete.bind(Object(p.a)(Object(p.a)(t))),t}return Object(m.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.data&&this.props.data.vip&&this.props.data.vip[0]&&this.setState({vip_id:this.props.data.vip[0].id||null})}},{key:"componentDidUpdate",value:function(){}},{key:"handleChange",value:function(e,a){this.setState(Object(v.a)({},a,e.target.value))}},{key:"handleNumPadChange",value:function(e,a){this.setState(Object(v.a)({},a,parseInt(e)))}},{key:"add",value:function(){this.setState({addAmount:this.state.addAmount+1},function(){console.log(this.state)})}},{key:"subtract",value:function(){this.setState({addAmount:this.state.addAmount-1},function(){console.log(this.state)})}},{key:"handleManualScan",value:function(){var e=this.props,a=e.data,t=e.token,n=this.state.addAmount,i={user_id:a.userDetails[0].id,amount:n,token:t};this.props.handleManualScan(i),this.setState({addAmount:0})}},{key:"handleManualClaim",value:function(){var e=this.props,a=e.data,t=e.token,n=this.state.reward_id,i={user_id:a.userDetails[0].id,reward_id:n,token:t};this.props.handleManualClaim(i),this.setState({reward_id:""})}},{key:"handleVIP",value:function(){"delete"===this.state.vip_id?this.handleVIPdelete():this.handleVIPadd()}},{key:"handleVIPadd",value:function(){var e=this.props.data,a=this.state.vip_id,t={user_id:e.userDetails[0].id,vip_id:a};this.props.handleVIPadd(t)}},{key:"handleVIPdelete",value:function(){var e=this.props.data;this.props.handleVIPdelete(e.userDetails[0].id)}},{key:"render",value:function(){var e=this,a=this.props,t=a.classes,n=a.data,i=a.clientData,s=this.state,r=s.addAmount,l=s.reward_id,c=s.vip_id,d=new Date(1e3*n.userDetails[0].created),u=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(d);return o.a.createElement("div",null,o.a.createElement(z.a,{position:"static",color:"default"},o.a.createElement(K.a,null,o.a.createElement(j.a,{variant:"h5",className:t.flexBox+" "+t.flexItem},n.vip[0]&&o.a.createElement("div",{className:t.vip},n.vip[0].name),n.userDetails[0].name),o.a.createElement("div",{className:t.flexBox},o.a.createElement("div",{className:t.flexItem+" "+t.marginSides},o.a.createElement(j.a,{color:"textSecondary",variant:"caption"},"Joined"),o.a.createElement(j.a,{gutterBottom:!0,component:"p"},u)),o.a.createElement("div",{className:t.flexItem+" "+t.marginSides},o.a.createElement(j.a,{color:"textSecondary",variant:"caption"},"Total points earned"),o.a.createElement(j.a,{gutterBottom:!0,component:"p"},n.userDetails[0].points)),o.a.createElement("div",{className:t.flexItem+" "+t.marginSides},o.a.createElement(j.a,{color:"textSecondary",variant:"caption"},"Total rewards redeemed"),o.a.createElement(j.a,{component:"p"},n.userDetails[0].redeemed_count))))),o.a.createElement("div",{className:t.cardWrapper},o.a.createElement(re.a,{className:t.card},o.a.createElement("div",{className:t.details},o.a.createElement(ce.a,{className:t.content},o.a.createElement(j.a,{variant:"subtitle1"},"Current Points"),o.a.createElement(j.a,{component:"h5",variant:"h5"},n.userDetails[0].current_points),o.a.createElement("div",{className:t.controls},o.a.createElement(me.a.Popover,{onChange:function(a){return e.handleNumPadChange(a,"addAmount")},position:"center",qtyIncrement:1,max:999,min:0,value:r},o.a.createElement(ue.a,{id:"standard-number",value:r,type:"number",className:t.textField,margin:"normal"}))),o.a.createElement(w.a,{variant:"contained",disabled:!r,color:"primary",className:t.button,onClick:this.handleManualScan},"Add Points")))),n.clientRewards&&n.clientRewards.length&&o.a.createElement(re.a,{className:t.card},o.a.createElement("div",{className:t.details},o.a.createElement(ce.a,{className:t.content},o.a.createElement(j.a,{variant:"subtitle1"},"Claim Rewards"),o.a.createElement(O.a,{className:t.controls},o.a.createElement(N.a,{htmlFor:"reward_id"},"Reward"),o.a.createElement(G.a,{value:l,onChange:function(a){return e.handleChange(a,"reward_id")},inputProps:{name:"reward_id",id:"reward_id"},className:t.inputBase},o.a.createElement(F.a,{value:""},o.a.createElement("em",null,"None")),n.clientRewards.map(function(e){return o.a.createElement(F.a,{value:e.id,key:e.id},o.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.reward_name+" ("+e.reward_points+" points)"}}))}))),o.a.createElement(w.a,{variant:"contained",disabled:!l,color:"primary",className:t.button,onClick:this.handleManualClaim},"Claim this Reward")))),i&&i.vips&&i.vips.length&&o.a.createElement(re.a,{className:t.card},o.a.createElement("div",{className:t.details},o.a.createElement(ce.a,{className:t.content},o.a.createElement(j.a,{variant:"subtitle1"},"VIP Status"),o.a.createElement(O.a,{className:t.controls},o.a.createElement(N.a,{htmlFor:"vip_id"},"VIP Levels"),o.a.createElement(G.a,{value:c,onChange:function(a){return e.handleChange(a,"vip_id")},inputProps:{name:"vip_id",id:"vip_id"},className:t.inputBase},o.a.createElement(F.a,{value:""},o.a.createElement("em",null,"None")),o.a.createElement(F.a,{value:"delete"},o.a.createElement("em",null,"Remove VIP Status")),i.vips.map(function(e){return o.a.createElement(F.a,{value:e.id,key:e.id},o.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.name+" ("+e.discount+"% discount)"}}))}))),o.a.createElement(w.a,{variant:"contained",disabled:n.vip&&n.vip[0]&&n.vip[0].id==c,color:"primary",className:t.button,onClick:this.handleVIP},"Update VIP Status"))))))}}]),a}(s.Component),ge=P()(function(e){return{vip:{borderWidth:2,borderColor:"#000000",borderRadius:3,borderStyle:"solid",padding:"2px 10px",fontSize:14,display:"block",fontWeight:"bold",marginRight:10,background:"#000000",color:"#FFFFFF"},flexBox:{display:"flex"},flexItem:{flexGrow:1,textAlign:"center"},marginSides:{marginRight:e.spacing.unit,marginLeft:e.spacing.unit},cardWrapper:{display:"flex",padding:3*e.spacing.unit,flexWrap:"wrap"},card:{margin:e.spacing.unit,flexGrow:1,textAlign:"center"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},controls:{display:"flex",alignItems:"center",width:200,marginTop:e.spacing.unit,marginBottom:e.spacing.unit,marginLeft:"auto",marginRight:"auto"},inputBase:{width:"100%"},textField:{"& input":{textAlign:"center",fontSize:36}},button:{margin:e.spacing.unit}}})(pe),fe=t(182),be=t.n(fe),je=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={quantity:1,location_token:null,unique:!1},t.updateStateGetQR=t.updateStateGetQR.bind(Object(p.a)(Object(p.a)(t))),t.handleNumPadChange=t.handleNumPadChange.bind(Object(p.a)(Object(p.a)(t))),t}return Object(m.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){this.updateStateGetQR()}},{key:"componentDidUpdate",value:function(){this.props.location.location_token!==this.state.location_token&&this.updateStateGetQR()}},{key:"shouldComponentUpdate",value:function(e,a){return this.state.location_token!==a.location_token||this.props.data.displayQR!==e.data.displayQR||this.props.location.location_token===this.state.location_token}},{key:"handleNumPadChange",value:function(e,a){this.state[a]!==parseInt(e)&&this.setState(Object(v.a)({},a,parseInt(e)),function(){this.props.getQR(this.state)})}},{key:"updateStateGetQR",value:function(){this.setState({location_token:this.props.location.location_token},function(){this.props.getQR(this.state)})}},{key:"render",value:function(){var e=this,a=this.props,t=a.classes,n=a.data,i=this.state.quantity,s="http://trueblue.guru/redirect.php?id="+n.clientData.id+"&e=";return n.displayQR?o.a.createElement("div",null,o.a.createElement(Q.a,{title:s+n.displayQR.code,className:t.qrWrapper},1===n.clientData.merchant_numpad&&o.a.createElement("div",null,o.a.createElement(me.a.Popover,{onChange:function(a){return e.handleNumPadChange(a,"quantity")},position:"center",qtyIncrement:1,max:999,min:1,value:i},o.a.createElement(ue.a,{id:"standard-number",value:i,type:"number",className:t.textField,margin:"normal"}))),1!==n.clientData.merchant_numpad&&o.a.createElement(j.a,{color:"textSecondary",variant:"h6"},i," Point(s)"),o.a.createElement(be.a,{value:s+n.displayQR.code,size:400,logo:n.clientData.client_icon}))):o.a.createElement("div",null,"Loading QR Code...")}}]),a}(s.Component),ve=P()(function(e){return{qrWrapper:{padding:20,textAlign:"center",margin:20,"& canvas":{width:"50% !important",height:"auto !important",minWidth:240,maxWidth:400}},textField:{marginTop:0,"& input":{textAlign:"center",fontSize:36}}}})(je),ye=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={quantity:1,location_token:null,reward_id:"",reward_name:null},t.handleChange=t.handleChange.bind(Object(p.a)(Object(p.a)(t))),t}return Object(m.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){var e={};e.location_token=this.props.location.location_token,this.props.data.rewardData&&1===this.props.data.rewardData.length&&(e.reward_id=this.props.data.rewardData[0].id,e.reward_name=this.props.data.rewardData[0].reward_name),this.setState(e,function(){this.props.getQR(this.state)})}},{key:"componentDidUpdate",value:function(){this.props.location.location_token!==this.state.location_token&&this.setState({location_token:this.props.location.location_token},function(){this.props.getQR(this.state)})}},{key:"shouldComponentUpdate",value:function(e,a){return this.state.location_token!==a.location_token||this.props.data.displayQR!==e.data.displayQR||this.props.location.location_token===this.state.location_token}},{key:"handleChange",value:function(e,a){this.setState(Object(v.a)({},a,e.target.value),function(){this.props.getQR(this.state)})}},{key:"render",value:function(){var e=this,a=this.props,t=a.classes,n=a.data,i=this.state,s=i.reward_id,r=i.reward_name;return n.rewardData?o.a.createElement("div",null,o.a.createElement(Q.a,{title:n.displayQR?n.displayQR.code:"",className:t.qrWrapper},n.rewardData&&n.rewardData.length>1?o.a.createElement(O.a,{className:t.controls},o.a.createElement(N.a,{htmlFor:"reward_id"},"Reward"),o.a.createElement(G.a,{value:s,onChange:function(a){return e.handleChange(a,"reward_id")},inputProps:{name:"reward_id",id:"reward_id"},className:t.inputBase},o.a.createElement(F.a,{value:""},o.a.createElement("em",null,"None")),n.rewardData.map(function(e){return o.a.createElement(F.a,{value:e.id,key:e.id},o.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.reward_name+" ("+e.reward_points+" points)"}}))}))):o.a.createElement(j.a,{color:"textSecondary",variant:"h6"},r),n.displayQR&&o.a.createElement(be.a,{value:n.displayQR.code,size:400,logo:n.clientData.client_icon}))):o.a.createElement("div",null,"Loading QR Code...")}}]),a}(s.Component),we=P()(function(e){return{qrWrapper:{padding:20,textAlign:"center",margin:20,"& canvas":{width:"50% !important",height:"auto !important",minWidth:240,maxWidth:400}},controls:{display:"flex",alignItems:"center",width:"100%",maxWidth:400,marginTop:e.spacing.unit,marginBottom:e.spacing.unit,marginLeft:"auto",marginRight:"auto"},inputBase:{width:"100%"}}})(ye),ke=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(m.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props;e.classes,e.location;return o.a.createElement("div",null,"Orders Area")}}]),a}(s.Component),Ee=P()(function(e){return{}})(ke),Se={locationsOpen:!1,selectedLocation:"",userApiKey:null,showArea:"",dialogOpen:!1,resetQROpen:!1},Oe=function(e){function a(e){var t;return Object(c.a)(this,a),t=Object(u.a)(this,Object(h.a)(a).call(this,e)),n=Object(p.a)(Object(p.a)(t)),t.state=Se,t.handleChange=t.handleChange.bind(Object(p.a)(Object(p.a)(t))),t.handleClose=t.handleClose.bind(Object(p.a)(Object(p.a)(t))),t.handleOpen=t.handleOpen.bind(Object(p.a)(Object(p.a)(t))),t.clearLocation=t.clearLocation.bind(Object(p.a)(Object(p.a)(t))),t.handleLogout=t.handleLogout.bind(Object(p.a)(Object(p.a)(t))),t.handleScan=t.handleScan.bind(Object(p.a)(Object(p.a)(t))),t.showThisArea=t.showThisArea.bind(Object(p.a)(Object(p.a)(t))),t.gotoSettings=t.gotoSettings.bind(Object(p.a)(Object(p.a)(t))),t.scanQR=t.scanQR.bind(Object(p.a)(Object(p.a)(t))),t.handleCloseDialog=t.handleCloseDialog.bind(Object(p.a)(Object(p.a)(t))),t.handleConfirmDialog=t.handleConfirmDialog.bind(Object(p.a)(Object(p.a)(t))),t.continueScan=t.continueScan.bind(Object(p.a)(Object(p.a)(t))),t.openResetQR=t.openResetQR.bind(Object(p.a)(Object(p.a)(t))),t.closeResetQR=t.closeResetQR.bind(Object(p.a)(Object(p.a)(t))),t.confirmResetQR=t.confirmResetQR.bind(Object(p.a)(Object(p.a)(t))),t}return Object(m.a)(a,e),Object(d.a)(a,[{key:"componentWillMount",value:function(){localStorage.getItem("selectedLocation")?this.setState({selectedLocation:parseInt(localStorage.getItem("selectedLocation"))}):this.props.data.clientData.locations&&(1===this.props.data.clientData.locations.length?(localStorage.setItem("selectedLocation",this.props.data.clientData.locations[0].id),this.setState({selectedLocation:parseInt(this.props.data.clientData.locations[0].id)})):this.setState({locationsOpen:!0}))}},{key:"handleChange",value:function(e){this.setState(Object(v.a)({},e.target.name,e.target.value),function(){"selectedLocation"===e.target.name&&localStorage.setItem("selectedLocation",e.target.value)})}},{key:"handleClose",value:function(){this.setState({locationsOpen:!1})}},{key:"handleOpen",value:function(){this.setState({locationsOpen:!0})}},{key:"clearLocation",value:function(){this.setState({selectedLocation:""})}},{key:"handleLogout",value:function(){this.setState(Se,function(){this.props.handleLogout()})}},{key:"showThisArea",value:function(e){this.props.getQR("clear"),this.state.showArea!==e?this.setState({showArea:e}):this.setState({showArea:""})}},{key:"handleScan",value:function(e){e&&this.setState({showArea:"",userApiKey:e},function(){this.props.handleGetUser(this.state.userApiKey)})}},{key:"handleError",value:function(e){console.error(e)}},{key:"gotoSettings",value:function(){cordova.plugins.diagnostic.switchToSettings(function(){console.log("Successfully switched to Settings app")},function(e){this.props.handleSnackbar("Error: "+e,"error")})}},{key:"scanQR",value:function(){cordova.plugins.diagnostic.requestCameraAuthorization(function(e){!0===e||"GRANTED"===e||"authorized"===e||e===cordova.plugins.diagnostic.permissionStatus.GRANTED?n.continueScan():!1===e||"DENIED"===e||e===cordova.plugins.diagnostic.permissionStatus.DENIED?n.setState({dialogOpen:!0}):n.props.handleSnackbar("Error: To complete this action, please allow access to the camera and storage in your settings.","error")},function(e){n.props.handleSnackbar("Error: "+e,"error")})}},{key:"handleCloseDialog",value:function(){this.setState({dialogOpen:!1})}},{key:"handleConfirmDialog",value:function(){this.gotoSettings()}},{key:"continueScan",value:function(){cordova.plugins.barcodeScanner.scan(function(e){e.cancelled||n.handleScan(e.text)},function(e){n.props.handleSnackbar("Error: Scanning failed!","error")})}},{key:"openResetQR",value:function(){this.setState({resetQROpen:!0})}},{key:"closeResetQR",value:function(){this.setState({resetQROpen:!1})}},{key:"confirmResetQR",value:function(){var e=this.props.data,a=this.state.selectedLocation,t=""!==a?e.clientData.locations.filter(function(e){return e.id===a}):null;a&&t[0]?this.props.handleResetQR(t[0].id):this.props.handleSnackbar("Error: A location is required.","error"),this.closeResetQR()}},{key:"render",value:function(){var e=this,a=this.props,t=a.classes,n=a.data,i=a.getQR,s=this.state,r=s.locationsOpen,l=s.dialogOpen,c=s.resetQROpen,d=s.selectedLocation,u=s.showArea,h=""!==d?n.clientData.locations.filter(function(e){return e.id===d}):null,m=n.clientData&&"merchant"===n.clientData.client_mode,p=h&&h[0]&&h[0].cart_email,g=!m&&n.rewardData&&n.rewardData.length,f=!(!n.merchantPageData||!n.merchantPageData[0]),b=!(!n.merchantPageData||!n.merchantPageData[0]||!n.merchantPageData[0].icon.includes("left")&&!n.merchantPageData[0].icon.includes("right")),v=n.userData?"userArea":u;return v=b&&!v?"pointsQR":v,o.a.createElement("div",null,o.a.createElement(se.a,{maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:l},o.a.createElement($.a,{id:"confirmation-dialog-title"},"Permissions Error"),o.a.createElement(ae.a,null,"To complete this action, please allow access to the camera and storage in your settings."),o.a.createElement(ne.a,null,o.a.createElement(w.a,{onClick:this.handleCloseDialog,color:"primary"},"Nevermind"),o.a.createElement(w.a,{onClick:this.handleConfirmDialog,color:"primary"},"Go to Settings"))),o.a.createElement(se.a,{maxWidth:"xs","aria-labelledby":"reset-qr-dialog-title",open:c},o.a.createElement($.a,{id:"confirmation-dialog-title"},"Reset QR Codes"),o.a.createElement(ae.a,null,"Are you sure you want to reset all of your QR codes?"),o.a.createElement(ne.a,null,o.a.createElement(w.a,{onClick:this.closeResetQR,color:"primary"},"Nevermind"),o.a.createElement(w.a,{onClick:this.confirmResetQR,color:"primary"},"Yes, Reset them"))),n.clientData.client_css&&o.a.createElement("style",null,n.clientData.client_css),(!d||0===h.length)&&n.clientData.locations&&n.clientData.locations.length>1&&o.a.createElement(z.a,{position:"static",color:"primary",className:"appBar"},o.a.createElement(K.a,null,o.a.createElement(O.a,{className:t.formControl},o.a.createElement(N.a,{htmlFor:"location-select"},"Select a location"),o.a.createElement(G.a,{open:r,onClose:this.handleClose,onOpen:this.handleOpen,value:d,onChange:this.handleChange,inputProps:{name:"selectedLocation",id:"location-select"}},o.a.createElement(F.a,{className:t.instructions,value:"",disabled:!0},"Select a location:"),n.clientData.locations.map(function(e){return o.a.createElement(F.a,{value:e.id,key:e.id},o.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.location_name}}))}))),o.a.createElement(J.a,{title:"Logout"},o.a.createElement(U.a,{color:"inherit","aria-label":"Logout",onClick:this.handleLogout},o.a.createElement("i",{className:"fas fa-sign-out"}))))),d&&h[0]&&o.a.createElement(z.a,{position:"static",color:"primary",className:"appBar"},o.a.createElement(K.a,null,n.clientData.locations&&n.clientData.locations.length>1&&o.a.createElement(J.a,{title:"Select a new location"},o.a.createElement(U.a,{color:"inherit","aria-label":"Select a new location",onClick:this.clearLocation},o.a.createElement("i",{className:"fas fa-building"}))),o.a.createElement(j.a,{variant:"h5",color:"inherit",className:t.leftBar},o.a.createElement("span",{dangerouslySetInnerHTML:{__html:h[0].location_name}})),m&&o.a.createElement(J.a,{title:"Scan a User QR Code"},o.a.createElement(U.a,{className:"qrScanner"===v||"userArea"===v?t.selectedButton:"",color:"inherit","aria-label":"Scan a User QR Code",onClick:this.scanQR},o.a.createElement("i",{className:"fas fa-user"}))),!m&&o.a.createElement(J.a,{title:"Reset QR Codes"},o.a.createElement(U.a,{color:"inherit","aria-label":"Show Point QR Code",onClick:function(a){return e.openResetQR()}},o.a.createElement("i",{className:"fas fa-sync"}))),!m&&o.a.createElement(J.a,{title:"Show Point QR Code"},o.a.createElement(U.a,{className:"pointsQR"===v?t.selectedButton:"",color:"inherit","aria-label":"Show Point QR Code",onClick:function(a){return e.showThisArea("pointsQR")}},o.a.createElement("i",{className:"fas fa-coins"}))),g&&o.a.createElement(J.a,{title:"Show Reward QR Code"},o.a.createElement(U.a,{className:"rewardsQR"===v?t.selectedButton:"",color:"inherit","aria-label":"Show Reward QR Code",onClick:function(a){return e.showThisArea("rewardsQR")}},o.a.createElement("i",{className:"fas fa-stars"}))),p&&o.a.createElement(J.a,{title:"Orders"},o.a.createElement(U.a,{className:"ordersArea"===v?t.selectedButton:"",color:"inherit","aria-label":"Orders",onClick:function(a){return e.showThisArea("ordersArea")}},o.a.createElement("i",{className:"fas fa-receipt"}))),o.a.createElement(J.a,{title:"Logout"},o.a.createElement(U.a,{color:"inherit","aria-label":"Logout",onClick:this.handleLogout},o.a.createElement("i",{className:"fas fa-sign-out"}))))),d&&h[0]&&(""===v||b)&&!f&&o.a.createElement("div",{className:t.fullscreen},o.a.createElement("div",{className:"verticallyCenter"},m&&o.a.createElement(X.a,{focusRipple:!0,focusVisibleClassName:t.focusVisible,onClick:this.scanQR,className:t.buttonBase},o.a.createElement("div",{className:t.largeIcon},o.a.createElement("i",{className:"fas fa-user fa-lg"})),o.a.createElement(j.a,{variant:"h6",color:"inherit"},"Scan User QR Code")),!m&&o.a.createElement(X.a,{focusRipple:!0,focusVisibleClassName:t.focusVisible,onClick:function(a){return e.showThisArea("pointsQR")},className:t.buttonBase},o.a.createElement("div",{className:t.largeIcon},o.a.createElement("i",{className:"fas fa-coins fa-lg"})),o.a.createElement(j.a,{variant:"h6",color:"inherit"},"Point QR Code")),g&&o.a.createElement(X.a,{focusRipple:!0,focusVisibleClassName:t.focusVisible,onClick:function(a){return e.showThisArea("rewardsQR")},className:t.buttonBase},o.a.createElement("div",{className:t.largeIcon},o.a.createElement("i",{className:"fas fa-stars fa-lg"})),o.a.createElement(j.a,{variant:"h6",color:"inherit"},"Reward QR Code")),p&&o.a.createElement(X.a,{focusRipple:!0,focusVisibleClassName:t.focusVisible,onClick:function(a){return e.showThisArea("ordersArea")},className:t.buttonBase},o.a.createElement("div",{className:t.largeIcon},o.a.createElement("i",{className:"fas fa-receipt fa-lg"})),o.a.createElement(j.a,{variant:"h6",color:"inherit"},"Orders")))),(""===v||b)&&f&&o.a.createElement("div",{className:n.merchantPageData[0].icon},n.merchantPageData[0].css&&o.a.createElement("style",null,n.merchantPageData[0].css),o.a.createElement("div",{className:t.page+" page",dangerouslySetInnerHTML:{__html:n.merchantPageData[0].content}})),"qrScanner"===v&&h&&o.a.createElement(T.a,{delay:this.state.delay,onError:this.handleError,onScan:this.handleScan,className:t.qrScanner}),"pointsQR"===v&&h&&o.a.createElement(ve,{data:n,location:h[0],getQR:i}),"rewardsQR"===v&&h&&o.a.createElement(we,{data:n,location:h[0],getQR:i}),"ordersArea"===v&&h&&o.a.createElement(Ee,{data:n,location:h[0]}),"userArea"===v&&h&&o.a.createElement(ge,{data:n.userData,clientData:n.clientData,token:h[0].location_token,handleManualScan:this.props.handleManualScan,handleManualClaim:this.props.handleManualClaim,handleVIPadd:this.props.handleVIPadd,handleVIPdelete:this.props.handleVIPdelete}))}}]),a}(s.Component),Re=P()(function(e){return{formControl:{margin:e.spacing.unit,flexGrow:1,color:"#FFF"},instructions:{background:"#333 !important",color:"#FFF",height:10,fontSize:14,opacity:1},leftBar:{flexGrow:1},qrScanner:{width:"100%","& section":{paddingTop:"calc(100vh - 60px) !important"}},fullscreen:{height:"calc(100vh - 60px) !important",textAlign:"center"},focusVisible:{},largeIcon:{padding:"20px 0","& .fa-lg":{fontSize:50}},buttonBase:{verticalAlign:"top",display:"inline-block",width:200,"& i":{padding:"10px auto"}},selectedButton:{background:"rgba(0,0,0,0.5)"},page:{minHeight:"calc(100vh - 64px)",boxSizing:"border-box"}}})(Oe),Ce=(t(1067),"http://live.trueblue.guru/application/v1.5/admin"),De={apiKey:null,adminData:null,clientData:null,userData:null,snackbarOpen:!1,snackbarMessage:"",snackbarClass:"",merchantPageData:null,displayQR:null},Ne=function(e){function a(e){var t;return Object(c.a)(this,a),t=Object(u.a)(this,Object(h.a)(a).call(this,e)),i=Object(p.a)(Object(p.a)(t)),t.state=De,t.showSnackbar=t.showSnackbar.bind(Object(p.a)(Object(p.a)(t))),t.hideSnackbar=t.hideSnackbar.bind(Object(p.a)(Object(p.a)(t))),t.handleLogout=t.handleLogout.bind(Object(p.a)(Object(p.a)(t))),t.adminLogin=t.adminLogin.bind(Object(p.a)(Object(p.a)(t))),t.apiLogin=t.apiLogin.bind(Object(p.a)(Object(p.a)(t))),t.getClient=t.getClient.bind(Object(p.a)(Object(p.a)(t))),t.getUser=t.getUser.bind(Object(p.a)(Object(p.a)(t))),t.getRewards=t.getRewards.bind(Object(p.a)(Object(p.a)(t))),t.getMerchantPage=t.getMerchantPage.bind(Object(p.a)(Object(p.a)(t))),t.getQR=t.getQR.bind(Object(p.a)(Object(p.a)(t))),t.handleManualScan=t.handleManualScan.bind(Object(p.a)(Object(p.a)(t))),t.handleManualClaim=t.handleManualClaim.bind(Object(p.a)(Object(p.a)(t))),t.handleVIPadd=t.handleVIPadd.bind(Object(p.a)(Object(p.a)(t))),t.handleVIPdelete=t.handleVIPdelete.bind(Object(p.a)(Object(p.a)(t))),t.handleResetQR=t.handleResetQR.bind(Object(p.a)(Object(p.a)(t))),t}return Object(m.a)(a,e),Object(d.a)(a,[{key:"showSnackbar",value:function(e,a){this.setState({snackbarOpen:!0,snackbarMessage:e,snackbarClass:a})}},{key:"hideSnackbar",value:function(){this.setState({snackbarOpen:!1,snackbarMessage:"",snackbarClass:""})}},{key:"handleLogout",value:function(){localStorage.removeItem("apiKey"),localStorage.removeItem("selectedLocation"),this.setState(De)}},{key:"componentDidMount",value:function(){localStorage.getItem("apiKey")&&i.setState({apiKey:localStorage.getItem("apiKey")},function(){i.apiLogin({api_key:i.state.apiKey})})}},{key:"componentDidUpdate",value:function(){}},{key:"adminLogin",value:function(e){console.log("adminLogin",e,Ce),fetch(Ce+"/login",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?i.showSnackbar("Error: "+e.message,"error"):i.setState({adminData:e,apiKey:e.apiKey},function(){localStorage.setItem("apiKey",i.state.apiKey),i.getClient(i.state.adminData.client_id)})})}},{key:"apiLogin",value:function(e){fetch(Ce+"/api_login",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?i.setState({apiKey:null}):i.setState({adminData:e,apiKey:e.apiKey},function(){i.getClient(i.state.adminData.client_id)})})}},{key:"getClient",value:function(){fetch(Ce+"/client",{method:"get",headers:{Authorization:this.state.apiKey,Tbapikey:this.state.apiKey}}).then(function(e){return e.json()}).then(function(e){e.error||(i.setState({clientData:e.client[0]}),i.getRewards(),i.getMerchantPage())})}},{key:"getUser",value:function(e){fetch(Ce+"/users/"+e,{method:"get",headers:{Authorization:this.state.apiKey,Tbapikey:this.state.apiKey}}).then(function(e){return e.json()}).then(function(e){e.error?i.showSnackbar("Error: "+e.message,"error"):i.setState({userData:e})})}},{key:"getRewards",value:function(){fetch(Ce+"/rewards",{method:"get",headers:{Authorization:this.state.apiKey,Tbapikey:this.state.apiKey}}).then(function(e){return e.json()}).then(function(e){e.error||i.setState({rewardData:e.rewards})})}},{key:"getMerchantPage",value:function(){fetch(Ce+"/pages",{method:"get",headers:{Authorization:this.state.apiKey,Tbapikey:this.state.apiKey}}).then(function(e){return e.json()}).then(function(e){e.error||i.setState({merchantPageData:e.pages})})}},{key:"handleResetQR",value:function(e){var a=this.randomString(10);fetch(Ce+"/locations/"+e,{method:"put",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey},body:this.xwwwfurlenc({token:a})}).then(function(e){return e.json()}).then(function(e){e.error?i.showSnackbar("Error: "+e.message,"error"):(i.showSnackbar("QR Codes have been reset.","success"),i.getClient())})}},{key:"getQR",value:function(e){"clear"===e?i.setState({displayQR:null}):fetch(Ce+"/qr",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?i.setState({displayQR:null}):i.setState({displayQR:e})})}},{key:"handleManualScan",value:function(e){fetch(Ce+"/scan_points",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?i.showSnackbar("Error: "+e.message,"error"):(i.showSnackbar("Points have been updated.","success"),i.getUser(i.state.userData.userDetails[0].api_key))})}},{key:"handleManualClaim",value:function(e){fetch(Ce+"/claim_scan",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?i.showSnackbar("Error: "+e.message,"error"):(i.showSnackbar("Reward has been claimed.","success"),i.getUser(i.state.userData.userDetails[0].api_key))})}},{key:"handleVIPadd",value:function(e){fetch(Ce+"/vip",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?i.showSnackbar("Error: "+e.message,"error"):(i.showSnackbar("VIP status has been updated.","success"),i.getUser(i.state.userData.userDetails[0].api_key))})}},{key:"handleVIPdelete",value:function(e){fetch(Ce+"/vip/"+e,{method:"delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey}}).then(function(e){return e.json()}).then(function(e){e.error?i.showSnackbar("Error: "+e.message,"error"):(i.showSnackbar("VIP status has been removed.","success"),i.getUser(i.state.userData.userDetails[0].api_key))})}},{key:"xwwwfurlenc",value:function(e){if("object"!==typeof e&&"undefined"!==typeof console)return console.log('"srcjson" is not a JSON object'),null;for(var a=encodeURIComponent,t="",n=Object.keys(e),i=0;i<n.length;i++)t+=a(n[i])+"="+a(e[n[i]]),i<n.length-1&&(t+="&");return t}},{key:"randomString",value:function(e){for(var a="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}},{key:"render",value:function(){var e=this.state,a=e.snackbarOpen,t=e.snackbarMessage,n=e.snackbarClass;return this.state.apiKey?this.state.apiKey?this.state.clientData?o.a.createElement("div",null,o.a.createElement(f.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a,onClose:this.hideSnackbar,message:t,className:n}),o.a.createElement(Re,{data:this.state,handleGetUser:this.getUser,handleManualScan:this.handleManualScan,handleManualClaim:this.handleManualClaim,handleVIPadd:this.handleVIPadd,handleVIPdelete:this.handleVIPdelete,handleLogout:this.handleLogout,handleSnackbar:this.showSnackbar,handleResetQR:this.handleResetQR,getQR:this.getQR})):o.a.createElement("div",null,"Loading..."):void 0:o.a.createElement("center",null,o.a.createElement(f.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a,onClose:this.hideSnackbar,message:t,className:n}),o.a.createElement("img",{src:"icon.png",alt:"TrueBlue",className:"login-icon",style:{margin:"30px 0 10px"}}),o.a.createElement(j.a,{variant:"h4",className:"login-h4",color:"inherit"},"TrueBlue Merchant"),o.a.createElement(A,{login_handler:this.adminLogin}))}}]),a}(s.Component),_e=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Qe(e,a){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var xe=function(){l.a.render(o.a.createElement(Ne,null),document.getElementById("root"))};window.onload=function(){console.log("window onload"),window.cordova?(console.log("cordova!"),document.addEventListener("deviceready",xe,!1)):(console.log("no cordova..."),setTimeout(function(){xe()},1e3))},function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var a="".concat(".","/service-worker.js");_e?(function(e,a){fetch(e).then(function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Qe(e,a)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(a,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Qe(a,e)})}}()},440:function(e,a,t){},509:function(e,a,t){var n={"./af":510,"./af.js":510,"./ar":511,"./ar-dz":512,"./ar-dz.js":512,"./ar-kw":513,"./ar-kw.js":513,"./ar-ly":514,"./ar-ly.js":514,"./ar-ma":515,"./ar-ma.js":515,"./ar-sa":516,"./ar-sa.js":516,"./ar-tn":517,"./ar-tn.js":517,"./ar.js":511,"./az":518,"./az.js":518,"./be":519,"./be.js":519,"./bg":520,"./bg.js":520,"./bm":521,"./bm.js":521,"./bn":522,"./bn.js":522,"./bo":523,"./bo.js":523,"./br":524,"./br.js":524,"./bs":525,"./bs.js":525,"./ca":526,"./ca.js":526,"./cs":527,"./cs.js":527,"./cv":528,"./cv.js":528,"./cy":529,"./cy.js":529,"./da":530,"./da.js":530,"./de":531,"./de-at":532,"./de-at.js":532,"./de-ch":533,"./de-ch.js":533,"./de.js":531,"./dv":534,"./dv.js":534,"./el":535,"./el.js":535,"./en-au":536,"./en-au.js":536,"./en-ca":537,"./en-ca.js":537,"./en-gb":538,"./en-gb.js":538,"./en-ie":539,"./en-ie.js":539,"./en-il":540,"./en-il.js":540,"./en-nz":541,"./en-nz.js":541,"./eo":542,"./eo.js":542,"./es":543,"./es-do":544,"./es-do.js":544,"./es-us":545,"./es-us.js":545,"./es.js":543,"./et":546,"./et.js":546,"./eu":547,"./eu.js":547,"./fa":548,"./fa.js":548,"./fi":549,"./fi.js":549,"./fo":550,"./fo.js":550,"./fr":551,"./fr-ca":552,"./fr-ca.js":552,"./fr-ch":553,"./fr-ch.js":553,"./fr.js":551,"./fy":554,"./fy.js":554,"./gd":555,"./gd.js":555,"./gl":556,"./gl.js":556,"./gom-latn":557,"./gom-latn.js":557,"./gu":558,"./gu.js":558,"./he":559,"./he.js":559,"./hi":560,"./hi.js":560,"./hr":561,"./hr.js":561,"./hu":562,"./hu.js":562,"./hy-am":563,"./hy-am.js":563,"./id":564,"./id.js":564,"./is":565,"./is.js":565,"./it":566,"./it.js":566,"./ja":567,"./ja.js":567,"./jv":568,"./jv.js":568,"./ka":569,"./ka.js":569,"./kk":570,"./kk.js":570,"./km":571,"./km.js":571,"./kn":572,"./kn.js":572,"./ko":573,"./ko.js":573,"./ky":574,"./ky.js":574,"./lb":575,"./lb.js":575,"./lo":576,"./lo.js":576,"./lt":577,"./lt.js":577,"./lv":578,"./lv.js":578,"./me":579,"./me.js":579,"./mi":580,"./mi.js":580,"./mk":581,"./mk.js":581,"./ml":582,"./ml.js":582,"./mn":583,"./mn.js":583,"./mr":584,"./mr.js":584,"./ms":585,"./ms-my":586,"./ms-my.js":586,"./ms.js":585,"./mt":587,"./mt.js":587,"./my":588,"./my.js":588,"./nb":589,"./nb.js":589,"./ne":590,"./ne.js":590,"./nl":591,"./nl-be":592,"./nl-be.js":592,"./nl.js":591,"./nn":593,"./nn.js":593,"./pa-in":594,"./pa-in.js":594,"./pl":595,"./pl.js":595,"./pt":596,"./pt-br":597,"./pt-br.js":597,"./pt.js":596,"./ro":598,"./ro.js":598,"./ru":599,"./ru.js":599,"./sd":600,"./sd.js":600,"./se":601,"./se.js":601,"./si":602,"./si.js":602,"./sk":603,"./sk.js":603,"./sl":604,"./sl.js":604,"./sq":605,"./sq.js":605,"./sr":606,"./sr-cyrl":607,"./sr-cyrl.js":607,"./sr.js":606,"./ss":608,"./ss.js":608,"./sv":609,"./sv.js":609,"./sw":610,"./sw.js":610,"./ta":611,"./ta.js":611,"./te":612,"./te.js":612,"./tet":613,"./tet.js":613,"./tg":614,"./tg.js":614,"./th":615,"./th.js":615,"./tl-ph":616,"./tl-ph.js":616,"./tlh":617,"./tlh.js":617,"./tr":618,"./tr.js":618,"./tzl":619,"./tzl.js":619,"./tzm":620,"./tzm-latn":621,"./tzm-latn.js":621,"./tzm.js":620,"./ug-cn":622,"./ug-cn.js":622,"./uk":623,"./uk.js":623,"./ur":624,"./ur.js":624,"./uz":625,"./uz-latn":626,"./uz-latn.js":626,"./uz.js":625,"./vi":627,"./vi.js":627,"./x-pseudo":628,"./x-pseudo.js":628,"./yo":629,"./yo.js":629,"./zh-cn":630,"./zh-cn.js":630,"./zh-hk":631,"./zh-hk.js":631,"./zh-tw":632,"./zh-tw.js":632};function i(e){var a=s(e);return t(a)}function s(e){var a=n[e];if(!(a+1)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a}i.keys=function(){return Object.keys(n)},i.resolve=s,e.exports=i,i.id=509},659:function(e,a,t){e.exports=t(1076)}},[[659,2,1]]]);
//# sourceMappingURL=main.9fe6a4ac.chunk.js.map