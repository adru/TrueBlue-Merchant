(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,a,t){e.exports=t(304)},295:function(e,a,t){},304:function(e,a,t){"use strict";t.r(a);var n,i=t(0),r=t.n(i),l=t(16),s=t.n(l),o=(t(76),t(17)),c=t(18),d=t(21),u=t(19),h=t(20),m=t(2),p=t(74),g=t.n(p),f=t(9),b=t.n(f),v=t(30),y=t(41),w=t.n(y),E=t(39),k=t.n(E),S=t(23),O=t.n(S),j=t(40),C=t.n(j),D=t(24),N=t.n(D),_=t(27),R=t.n(_),x=t(6),I=t.n(x),P=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).state={username:"",password:""},t.handleChange=t.handleChange.bind(Object(m.a)(Object(m.a)(t))),t.handleSubmit=t.handleSubmit.bind(Object(m.a)(Object(m.a)(t))),t}return Object(h.a)(a,e),Object(c.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(v.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.login_handler(this.state)}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement(k.a,null),r.a.createElement("main",{className:e.layout},r.a.createElement(R.a,{className:e.paper},r.a.createElement(b.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:e.form,onSubmit:this.handleSubmit},r.a.createElement(O.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(N.a,{htmlFor:"username"},"Email Address or Username"),r.a.createElement(C.a,{id:"username",name:"username",autoComplete:"email",value:this.state.username,onChange:this.handleChange,autoFocus:!0})),r.a.createElement(O.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(N.a,{htmlFor:"password"},"Password"),r.a.createElement(C.a,{name:"password",type:"password",id:"password",autoComplete:"current-password",value:this.state.password,onChange:this.handleChange})),r.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign in")))))}}]),a}(r.a.Component),A=I()(function(e){return{layout:Object(v.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(P),L=t(111),M=t.n(L),Q=t(50),T=t.n(Q),V=t(51),K=t.n(V),B=t(25),F=t.n(B),U=t(22),W=t.n(U),z=t(32),q=t.n(z),H=t(33),G=t.n(H),J=t(31),$=t.n(J),X=t(63),Y=t.n(X),Z=t(64),ee=t.n(Z),ae=t(112),te=t.n(ae),ne=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).state={addAmount:0,reward_id:"",vip_id:""},t.handleChange=t.handleChange.bind(Object(m.a)(Object(m.a)(t))),t.add=t.add.bind(Object(m.a)(Object(m.a)(t))),t.subtract=t.subtract.bind(Object(m.a)(Object(m.a)(t))),t.handleManualScan=t.handleManualScan.bind(Object(m.a)(Object(m.a)(t))),t.handleManualClaim=t.handleManualClaim.bind(Object(m.a)(Object(m.a)(t))),t.handleVIP=t.handleVIP.bind(Object(m.a)(Object(m.a)(t))),t.handleVIPadd=t.handleVIPadd.bind(Object(m.a)(Object(m.a)(t))),t.handleVIPdelete=t.handleVIPdelete.bind(Object(m.a)(Object(m.a)(t))),t}return Object(h.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.data&&this.props.data.vip&&this.props.data.vip[0]&&this.setState({vip_id:this.props.data.vip[0].id||null})}},{key:"componentDidUpdate",value:function(){}},{key:"handleChange",value:function(e,a){this.setState(Object(v.a)({},a,e.target.value))}},{key:"add",value:function(){this.setState({addAmount:this.state.addAmount+1},function(){console.log(this.state)})}},{key:"subtract",value:function(){this.setState({addAmount:this.state.addAmount-1},function(){console.log(this.state)})}},{key:"handleManualScan",value:function(){var e=this.props,a=e.data,t=e.token,n=this.state.addAmount,i={user_id:a.userDetails[0].id,amount:n,token:t};this.props.handleManualScan(i),this.setState({addAmount:0})}},{key:"handleManualClaim",value:function(){var e=this.props,a=e.data,t=e.token,n=this.state.reward_id,i={user_id:a.userDetails[0].id,reward_id:n,token:t};this.props.handleManualClaim(i),this.setState({reward_id:""})}},{key:"handleVIP",value:function(){"delete"===this.state.vip_id?this.handleVIPdelete():this.handleVIPadd()}},{key:"handleVIPadd",value:function(){var e=this.props.data,a=this.state.vip_id,t={user_id:e.userDetails[0].id,vip_id:a};this.props.handleVIPadd(t)}},{key:"handleVIPdelete",value:function(){var e=this.props.data;this.state.vip_id;this.props.handleVIPdelete(e.userDetails[0].id)}},{key:"render",value:function(){var e=this,a=this.props,t=a.classes,n=a.data,i=a.clientData,l=this.state,s=l.addAmount,o=l.reward_id,c=l.vip_id,d=new Date(1e3*n.userDetails[0].created),u=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(d);return console.log(i,i.locations),r.a.createElement("div",null,r.a.createElement(T.a,{position:"static",color:"default"},r.a.createElement(K.a,null,r.a.createElement(b.a,{variant:"h5",className:t.flexBox+" "+t.flexItem},n.vip[0]&&r.a.createElement("div",{className:t.vip},n.vip[0].name),n.userDetails[0].name),r.a.createElement("div",{className:t.flexBox},r.a.createElement("div",{className:t.flexItem+" "+t.marginSides},r.a.createElement(b.a,{color:"textSecondary",variant:"caption"},"Joined"),r.a.createElement(b.a,{gutterBottom:!0,component:"p"},u)),r.a.createElement("div",{className:t.flexItem+" "+t.marginSides},r.a.createElement(b.a,{color:"textSecondary",variant:"caption"},"Total points earned"),r.a.createElement(b.a,{gutterBottom:!0,component:"p"},n.userDetails[0].points)),r.a.createElement("div",{className:t.flexItem+" "+t.marginSides},r.a.createElement(b.a,{color:"textSecondary",variant:"caption"},"Total rewards redeemed"),r.a.createElement(b.a,{component:"p"},n.userDetails[0].redeemed_count))))),r.a.createElement("div",{className:t.cardWrapper},r.a.createElement(Y.a,{className:t.card},r.a.createElement("div",{className:t.details},r.a.createElement(ee.a,{className:t.content},r.a.createElement(b.a,{variant:"subtitle1"},"Current Points"),r.a.createElement(b.a,{component:"h5",variant:"h5"},n.userDetails[0].current_points),r.a.createElement("div",{className:t.controls},r.a.createElement(F.a,{onClick:this.subtract},r.a.createElement("i",{className:"fas fa-minus"})),r.a.createElement(te.a,{id:"standard-number",value:s,onChange:function(a){return e.handleChange(a,"addAmount")},type:"number",className:t.textField,margin:"normal"}),r.a.createElement(F.a,{onClick:this.add},r.a.createElement("i",{className:"fas fa-plus"}))),r.a.createElement(w.a,{variant:"contained",disabled:!s,color:"primary",className:t.button,onClick:this.handleManualScan},"Add Points")))),n.clientRewards&&n.clientRewards.length&&r.a.createElement(Y.a,{className:t.card},r.a.createElement("div",{className:t.details},r.a.createElement(ee.a,{className:t.content},r.a.createElement(b.a,{variant:"subtitle1"},"Claim Rewards"),r.a.createElement(O.a,{className:t.controls},r.a.createElement(N.a,{htmlFor:"reward_id"},"Reward"),r.a.createElement(q.a,{value:o,onChange:function(a){return e.handleChange(a,"reward_id")},inputProps:{name:"reward_id",id:"reward_id"},className:t.inputBase},r.a.createElement(W.a,{value:""},r.a.createElement("em",null,"None")),n.clientRewards.map(function(e){return r.a.createElement(W.a,{value:e.id,key:e.id},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.reward_name+" ("+e.reward_points+" points)"}}))}))),r.a.createElement(w.a,{variant:"contained",disabled:!o,color:"primary",className:t.button,onClick:this.handleManualClaim},"Claim this Reward")))),i&&i.vips&&i.vips.length&&r.a.createElement(Y.a,{className:t.card},r.a.createElement("div",{className:t.details},r.a.createElement(ee.a,{className:t.content},r.a.createElement(b.a,{variant:"subtitle1"},"VIP Status"),r.a.createElement(O.a,{className:t.controls},r.a.createElement(N.a,{htmlFor:"vip_id"},"VIP Levels"),r.a.createElement(q.a,{value:c,onChange:function(a){return e.handleChange(a,"vip_id")},inputProps:{name:"vip_id",id:"vip_id"},className:t.inputBase},r.a.createElement(W.a,{value:""},r.a.createElement("em",null,"None")),r.a.createElement(W.a,{value:"delete"},r.a.createElement("em",null,"Remove VIP Status")),i.vips.map(function(e){return r.a.createElement(W.a,{value:e.id,key:e.id},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.name+" ("+e.discount+"% discount)"}}))}))),r.a.createElement(w.a,{variant:"contained",disabled:n.vip&&n.vip[0]&&n.vip[0].id==c,color:"primary",className:t.button,onClick:this.handleVIP},"Update VIP Status"))))))}}]),a}(i.Component),ie=I()(function(e){return{vip:{borderWidth:2,borderColor:"#000000",borderRadius:3,borderStyle:"solid",padding:"2px 10px",fontSize:14,display:"block",fontWeight:"bold",marginRight:10,background:"#000000",color:"#FFFFFF"},flexBox:{display:"flex"},flexItem:{flexGrow:1,textAlign:"center"},marginSides:{marginRight:e.spacing.unit,marginLeft:e.spacing.unit},cardWrapper:{display:"flex",padding:3*e.spacing.unit,flexWrap:"wrap"},card:{margin:e.spacing.unit,flexGrow:1,textAlign:"center"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},controls:{display:"flex",alignItems:"center",width:200,marginTop:e.spacing.unit,marginBottom:e.spacing.unit,marginLeft:"auto",marginRight:"auto"},inputBase:{width:"100%"},textField:{"& input":{textAlign:"center",fontSize:36}},button:{margin:e.spacing.unit}}})(ne),re=t(62),le=t.n(re),se=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).state={quantity:1,location_token:null,unique:!1},t}return Object(h.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({location_token:this.props.location.location_token},function(){this.props.getQR(this.state)})}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props,a=e.classes,t=e.data,n=(e.location,this.state.quantity),i="http://trueblue.guru/redirect.php?id="+t.clientData.id+"&e=";return t.displayQR?r.a.createElement("div",null,r.a.createElement(R.a,{title:i+t.displayQR.code,className:a.qrWrapper},r.a.createElement(b.a,{color:"textSecondary",variant:"h6"},n," Point(s)"),r.a.createElement(le.a,{value:i+t.displayQR.code,size:400,logo:t.clientData.client_icon}))):r.a.createElement("div",null,"Loading QR Code...")}}]),a}(i.Component),oe=I()(function(e){return{qrWrapper:{padding:20,textAlign:"center",margin:20,"& canvas":{width:"50% !important",height:"auto !important",minWidth:240,maxWidth:400}}}})(se),ce=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).state={quantity:1,location_token:null,reward_id:"",reward_name:null},t.handleChange=t.handleChange.bind(Object(m.a)(Object(m.a)(t))),t}return Object(h.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({location_token:this.props.location.location_token},function(){this.props.data.rewardData&&1===this.props.data.rewardData.length&&this.setState({reward_id:this.props.data.rewardData[0].id,reward_name:this.props.data.rewardData[0].reward_name},function(){this.props.getQR(this.state)})})}},{key:"componentDidUpdate",value:function(){}},{key:"handleChange",value:function(e,a){this.setState(Object(v.a)({},a,e.target.value),function(){this.props.getQR(this.state)})}},{key:"render",value:function(){var e=this,a=this.props,t=a.classes,n=a.data,i=(a.location,this.state),l=i.reward_id,s=i.reward_name;return n.rewardData?r.a.createElement("div",null,r.a.createElement(R.a,{title:n.displayQR?n.displayQR.code:"",className:t.qrWrapper},n.rewardData&&n.rewardData.length>1?r.a.createElement(O.a,{className:t.controls},r.a.createElement(N.a,{htmlFor:"reward_id"},"Reward"),r.a.createElement(q.a,{value:l,onChange:function(a){return e.handleChange(a,"reward_id")},inputProps:{name:"reward_id",id:"reward_id"},className:t.inputBase},r.a.createElement(W.a,{value:""},r.a.createElement("em",null,"None")),n.rewardData.map(function(e){return r.a.createElement(W.a,{value:e.id,key:e.id},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.reward_name+" ("+e.reward_points+" points)"}}))}))):r.a.createElement(b.a,{color:"textSecondary",variant:"h6"},s),n.displayQR&&r.a.createElement(le.a,{value:n.displayQR.code,size:400,logo:n.clientData.client_icon}))):r.a.createElement("div",null,"Loading QR Code...")}}]),a}(i.Component),de=I()(function(e){return{qrWrapper:{padding:20,textAlign:"center",margin:20,"& canvas":{width:"50% !important",height:"auto !important",minWidth:240,maxWidth:400}},controls:{display:"flex",alignItems:"center",width:"100%",maxWidth:400,marginTop:e.spacing.unit,marginBottom:e.spacing.unit,marginLeft:"auto",marginRight:"auto"},inputBase:{width:"100%"}}})(ce),ue=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).state={},t}return Object(h.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props;e.classes,e.location;return r.a.createElement("div",null,"Orders Area")}}]),a}(i.Component),he=I()(function(e){return{}})(ue),me={locationsOpen:!1,selectedLocation:"",userApiKey:null,showArea:""},pe=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).state=me,t.handleChange=t.handleChange.bind(Object(m.a)(Object(m.a)(t))),t.handleClose=t.handleClose.bind(Object(m.a)(Object(m.a)(t))),t.handleOpen=t.handleOpen.bind(Object(m.a)(Object(m.a)(t))),t.clearLocation=t.clearLocation.bind(Object(m.a)(Object(m.a)(t))),t.handleLogout=t.handleLogout.bind(Object(m.a)(Object(m.a)(t))),t.handleScan=t.handleScan.bind(Object(m.a)(Object(m.a)(t))),t.showThisArea=t.showThisArea.bind(Object(m.a)(Object(m.a)(t))),t}return Object(h.a)(a,e),Object(c.a)(a,[{key:"componentWillMount",value:function(){localStorage.getItem("selectedLocation")?this.setState({selectedLocation:parseInt(localStorage.getItem("selectedLocation"))}):this.props.data.clientData.locations&&(1===this.props.data.clientData.locations.length?(localStorage.setItem("selectedLocation",this.props.data.clientData.locations[0].id),this.setState({selectedLocation:parseInt(this.props.data.clientData.locations[0].id)})):this.setState({locationsOpen:!0}))}},{key:"handleChange",value:function(e){this.setState(Object(v.a)({},e.target.name,e.target.value),function(){"selectedLocation"===e.target.name&&localStorage.setItem("selectedLocation",e.target.value)})}},{key:"handleClose",value:function(){this.setState({locationsOpen:!1})}},{key:"handleOpen",value:function(){this.setState({locationsOpen:!0})}},{key:"clearLocation",value:function(){this.setState({selectedLocation:""})}},{key:"handleLogout",value:function(){this.setState(me,function(){this.props.handleLogout()})}},{key:"showThisArea",value:function(e){this.props.getQR("clear"),this.state.showArea!==e?this.setState({showArea:e}):this.setState({showArea:""})}},{key:"handleScan",value:function(e){e&&this.setState({showArea:"",userApiKey:e},function(){this.props.handleGetUser(this.state.userApiKey)})}},{key:"handleError",value:function(e){console.error(e)}},{key:"render",value:function(){var e=this,a=this.props,t=a.classes,n=a.data,i=a.getQR,l=this.state,s=l.locationsOpen,o=l.selectedLocation,c=l.showArea,d=""!==o?n.clientData.locations.filter(function(e){return e.id===o}):null,u=n.clientData&&"merchant"===n.clientData.client_mode,h=d&&d[0]&&d[0].cart_email,m=!u&&n.rewardData&&n.rewardData.length,p=!(!n.merchantPageData||!n.merchantPageData[0]),g=!(!n.merchantPageData||!n.merchantPageData[0]||!n.merchantPageData[0].icon.includes("left")&&!n.merchantPageData[0].icon.includes("right")),f=n.userData?"userArea":c;return f=g&&!f?"pointsQR":f,r.a.createElement("div",null,n.clientData.client_css&&r.a.createElement("style",null,n.clientData.client_css),(!o||0===d.length)&&n.clientData.locations&&n.clientData.locations.length>1&&r.a.createElement(T.a,{position:"static",color:"primary",className:"appBar"},r.a.createElement(K.a,null,r.a.createElement(O.a,{className:t.formControl},r.a.createElement(N.a,{htmlFor:"location-select"},"Select a location"),r.a.createElement(q.a,{open:s,onClose:this.handleClose,onOpen:this.handleOpen,value:o,onChange:this.handleChange,inputProps:{name:"selectedLocation",id:"location-select"}},r.a.createElement(W.a,{className:t.instructions,value:"",disabled:!0},"Select a location:"),n.clientData.locations.map(function(e){return r.a.createElement(W.a,{value:e.id,key:e.id},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.location_name}}))}))),r.a.createElement(G.a,{title:"Logout"},r.a.createElement(F.a,{color:"inherit","aria-label":"Logout",onClick:this.handleLogout},r.a.createElement("i",{className:"fas fa-sign-out"}))))),o&&d[0]&&r.a.createElement(T.a,{position:"static",color:"primary",className:"appBar"},r.a.createElement(K.a,null,r.a.createElement(b.a,{variant:"h5",color:"inherit",className:t.leftBar},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:d[0].location_name}})),u&&r.a.createElement(G.a,{title:"Scan a User QR Code"},r.a.createElement(F.a,{className:"qrScanner"===f||"userArea"===f?t.selectedButton:"",color:"inherit","aria-label":"Scan a User QR Code",onClick:function(a){return e.showThisArea("qrScanner")}},r.a.createElement("i",{className:"fas fa-user"}))),!u&&r.a.createElement(G.a,{title:"Show Point QR Code"},r.a.createElement(F.a,{className:"pointsQR"===f?t.selectedButton:"",color:"inherit","aria-label":"Show Point QR Code",onClick:function(a){return e.showThisArea("pointsQR")}},r.a.createElement("i",{className:"fas fa-coins"}))),m&&r.a.createElement(G.a,{title:"Show Reward QR Code"},r.a.createElement(F.a,{className:"rewardsQR"===f?t.selectedButton:"",color:"inherit","aria-label":"Show Reward QR Code",onClick:function(a){return e.showThisArea("rewardsQR")}},r.a.createElement("i",{className:"fas fa-stars"}))),h&&r.a.createElement(G.a,{title:"Orders"},r.a.createElement(F.a,{className:"ordersArea"===f?t.selectedButton:"",color:"inherit","aria-label":"Orders",onClick:function(a){return e.showThisArea("ordersArea")}},r.a.createElement("i",{className:"fas fa-receipt"}))),n.clientData.locations&&n.clientData.locations.length>1&&r.a.createElement(G.a,{title:"Select a new location"},r.a.createElement(F.a,{color:"inherit","aria-label":"Select a new location",onClick:this.clearLocation},r.a.createElement("i",{className:"fas fa-building"}))),r.a.createElement(G.a,{title:"Logout"},r.a.createElement(F.a,{color:"inherit","aria-label":"Logout",onClick:this.handleLogout},r.a.createElement("i",{className:"fas fa-sign-out"}))))),(""===f||g)&&!p&&r.a.createElement("div",{className:t.fullscreen},r.a.createElement("div",{className:"verticallyCenter"},u&&r.a.createElement($.a,{focusRipple:!0,focusVisibleClassName:t.focusVisible,onClick:function(a){return e.showThisArea("qrScanner")},className:t.buttonBase},r.a.createElement("div",{className:t.largeIcon},r.a.createElement("i",{className:"fas fa-user fa-lg"})),r.a.createElement(b.a,{variant:"h6",color:"inherit"},"Show User QR Code")),!u&&r.a.createElement($.a,{focusRipple:!0,focusVisibleClassName:t.focusVisible,onClick:function(a){return e.showThisArea("pointsQR")},className:t.buttonBase},r.a.createElement("div",{className:t.largeIcon},r.a.createElement("i",{className:"fas fa-coins fa-lg"})),r.a.createElement(b.a,{variant:"h6",color:"inherit"},"Point QR Code")),m&&r.a.createElement($.a,{focusRipple:!0,focusVisibleClassName:t.focusVisible,onClick:function(a){return e.showThisArea("rewardsQR")},className:t.buttonBase},r.a.createElement("div",{className:t.largeIcon},r.a.createElement("i",{className:"fas fa-stars fa-lg"})),r.a.createElement(b.a,{variant:"h6",color:"inherit"},"Reward QR Code")),h&&r.a.createElement($.a,{focusRipple:!0,focusVisibleClassName:t.focusVisible,onClick:function(a){return e.showThisArea("ordersArea")},className:t.buttonBase},r.a.createElement("div",{className:t.largeIcon},r.a.createElement("i",{className:"fas fa-receipt fa-lg"})),r.a.createElement(b.a,{variant:"h6",color:"inherit"},"Orders")))),(""===f||g)&&p&&r.a.createElement("div",{className:n.merchantPageData[0].icon},n.merchantPageData[0].css&&r.a.createElement("style",null,n.merchantPageData[0].css),r.a.createElement("div",{className:t.page+" page",dangerouslySetInnerHTML:{__html:n.merchantPageData[0].content}})),"qrScanner"===f&&d&&r.a.createElement(M.a,{delay:this.state.delay,onError:this.handleError,onScan:this.handleScan,className:t.qrScanner}),"pointsQR"===f&&d&&r.a.createElement(oe,{data:n,location:d[0],getQR:i}),"rewardsQR"===f&&d&&r.a.createElement(de,{data:n,location:d[0],getQR:i}),"ordersArea"===f&&d&&r.a.createElement(he,{data:n,location:d[0]}),"userArea"===f&&d&&r.a.createElement(ie,{data:n.userData,clientData:n.clientData,token:d[0].location_token,handleManualScan:this.props.handleManualScan,handleManualClaim:this.props.handleManualClaim,handleVIPadd:this.props.handleVIPadd,handleVIPdelete:this.props.handleVIPdelete}))}}]),a}(i.Component),ge=I()(function(e){return{formControl:{margin:e.spacing.unit,flexGrow:1,color:"#FFF"},instructions:{background:"#333 !important",color:"#FFF",height:10,fontSize:14,opacity:1},leftBar:{flexGrow:1},qrScanner:{width:"100%","& section":{paddingTop:"calc(100vh - 60px) !important"}},fullscreen:{height:"calc(100vh - 60px) !important",textAlign:"center"},focusVisible:{},largeIcon:{padding:"20px 0","& .fa-lg":{fontSize:50}},buttonBase:{verticalAlign:"top",display:"inline-block",width:200,"& i":{padding:"10px auto"}},selectedButton:{background:"rgba(0,0,0,0.5)"},page:{minHeight:"calc(100vh - 64px)",boxSizing:"border-box"}}})(pe),fe=(t(295),"http://live.trueblue.guru/application/v1.5/admin"),be={apiKey:null,adminData:null,clientData:null,userData:null,snackbarOpen:!1,snackbarMessage:"",snackbarClass:"",merchantPageData:null,displayQR:null},ve=function(e){function a(e){var t;return Object(o.a)(this,a),t=Object(d.a)(this,Object(u.a)(a).call(this,e)),n=Object(m.a)(Object(m.a)(t)),t.state=be,t.showSnackbar=t.showSnackbar.bind(Object(m.a)(Object(m.a)(t))),t.hideSnackbar=t.hideSnackbar.bind(Object(m.a)(Object(m.a)(t))),t.handleLogout=t.handleLogout.bind(Object(m.a)(Object(m.a)(t))),t.adminLogin=t.adminLogin.bind(Object(m.a)(Object(m.a)(t))),t.apiLogin=t.apiLogin.bind(Object(m.a)(Object(m.a)(t))),t.getClient=t.getClient.bind(Object(m.a)(Object(m.a)(t))),t.getUser=t.getUser.bind(Object(m.a)(Object(m.a)(t))),t.getRewards=t.getRewards.bind(Object(m.a)(Object(m.a)(t))),t.getMerchantPage=t.getMerchantPage.bind(Object(m.a)(Object(m.a)(t))),t.getQR=t.getQR.bind(Object(m.a)(Object(m.a)(t))),t.handleManualScan=t.handleManualScan.bind(Object(m.a)(Object(m.a)(t))),t.handleManualClaim=t.handleManualClaim.bind(Object(m.a)(Object(m.a)(t))),t.handleVIPadd=t.handleVIPadd.bind(Object(m.a)(Object(m.a)(t))),t.handleVIPdelete=t.handleVIPdelete.bind(Object(m.a)(Object(m.a)(t))),t}return Object(h.a)(a,e),Object(c.a)(a,[{key:"showSnackbar",value:function(e,a){this.setState({snackbarOpen:!0,snackbarMessage:e,snackbarClass:a})}},{key:"hideSnackbar",value:function(){this.setState({snackbarOpen:!1,snackbarMessage:"",snackbarClass:""})}},{key:"handleLogout",value:function(){localStorage.removeItem("apiKey"),localStorage.removeItem("selectedLocation"),this.setState(be)}},{key:"componentDidMount",value:function(){localStorage.getItem("apiKey")&&n.setState({apiKey:localStorage.getItem("apiKey")},function(){n.apiLogin({api_key:n.state.apiKey})})}},{key:"componentDidUpdate",value:function(){}},{key:"adminLogin",value:function(e){fetch(fe+"/login",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?n.showSnackbar("Error: "+e.message,"error"):n.setState({adminData:e,apiKey:e.apiKey},function(){localStorage.setItem("apiKey",n.state.apiKey),n.getClient(n.state.adminData.client_id)})})}},{key:"apiLogin",value:function(e){fetch(fe+"/api_login",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?n.setState({apiKey:null}):n.setState({adminData:e,apiKey:e.apiKey},function(){n.getClient(n.state.adminData.client_id)})})}},{key:"getClient",value:function(){fetch(fe+"/client",{method:"get",headers:{Authorization:this.state.apiKey,Tbapikey:this.state.apiKey}}).then(function(e){return e.json()}).then(function(e){e.error||(n.setState({clientData:e.client[0]}),n.getRewards(),n.getMerchantPage())})}},{key:"getUser",value:function(e){fetch(fe+"/users/"+e,{method:"get",headers:{Authorization:this.state.apiKey,Tbapikey:this.state.apiKey}}).then(function(e){return e.json()}).then(function(e){e.error||n.setState({userData:e})})}},{key:"getRewards",value:function(){fetch(fe+"/rewards",{method:"get",headers:{Authorization:this.state.apiKey,Tbapikey:this.state.apiKey}}).then(function(e){return e.json()}).then(function(e){e.error||n.setState({rewardData:e.rewards})})}},{key:"getMerchantPage",value:function(){fetch(fe+"/pages",{method:"get",headers:{Authorization:this.state.apiKey,Tbapikey:this.state.apiKey}}).then(function(e){return e.json()}).then(function(e){e.error||n.setState({merchantPageData:e.pages})})}},{key:"getQR",value:function(e){"clear"===e?n.setState({displayQR:null}):fetch(fe+"/qr",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?n.setState({displayQR:null}):n.setState({displayQR:e})})}},{key:"handleManualScan",value:function(e){fetch(fe+"/scan_points",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?n.showSnackbar("Error: "+e.message,"error"):(n.showSnackbar("Points have been updated.","success"),n.getUser(n.state.userData.userDetails[0].api_key))})}},{key:"handleManualClaim",value:function(e){fetch(fe+"/claim_scan",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?n.showSnackbar("Error: "+e.message,"error"):(n.showSnackbar("Reward has been claimed.","success"),n.getUser(n.state.userData.userDetails[0].api_key))})}},{key:"handleVIPadd",value:function(e){fetch(fe+"/vip",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey},body:this.xwwwfurlenc(e)}).then(function(e){return e.json()}).then(function(e){e.error?n.showSnackbar("Error: "+e.message,"error"):(n.showSnackbar("VIP status has been updated.","success"),n.getUser(n.state.userData.userDetails[0].api_key))})}},{key:"handleVIPdelete",value:function(e){fetch(fe+"/vip/"+e,{method:"delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:this.state.apiKey,Tbapikey:this.state.apiKey}}).then(function(e){return e.json()}).then(function(e){e.error?n.showSnackbar("Error: "+e.message,"error"):(n.showSnackbar("VIP status has been removed.","success"),n.getUser(n.state.userData.userDetails[0].api_key))})}},{key:"xwwwfurlenc",value:function(e){if("object"!==typeof e&&"undefined"!==typeof console)return console.log('"srcjson" is not a JSON object'),null;for(var a=encodeURIComponent,t="",n=Object.keys(e),i=0;i<n.length;i++)t+=a(n[i])+"="+a(e[n[i]]),i<n.length-1&&(t+="&");return t}},{key:"render",value:function(){var e=this.state,a=e.snackbarOpen,t=e.snackbarMessage,n=e.snackbarClass;return this.state.apiKey?this.state.apiKey?this.state.clientData?r.a.createElement("div",null,r.a.createElement(g.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a,onClose:this.hideSnackbar,message:t,className:n}),r.a.createElement(ge,{data:this.state,handleGetUser:this.getUser,handleManualScan:this.handleManualScan,handleManualClaim:this.handleManualClaim,handleVIPadd:this.handleVIPadd,handleVIPdelete:this.handleVIPdelete,handleLogout:this.handleLogout,getQR:this.getQR})):r.a.createElement("div",null,"Loading..."):void 0:r.a.createElement("center",null,r.a.createElement(g.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a,onClose:this.hideSnackbar,message:t,className:n}),r.a.createElement("img",{src:"icon.png",className:"login-icon",style:{margin:"30px 0 10px"}}),r.a.createElement(b.a,{variant:"h4",className:"login-h4",color:"inherit"},"TrueBlue Merchant"),r.a.createElement(A,{login_handler:this.adminLogin}))}}]),a}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ye=function(){s.a.render(r.a.createElement(ve,null),document.getElementById("root"))};window.cordova?document.addEventListener("deviceready",ye,!1):ye(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},76:function(e,a,t){}},[[113,2,1]]]);
//# sourceMappingURL=main.42b56a28.chunk.js.map